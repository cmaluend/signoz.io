---
date: 2026-02-01
id: php
title: PHP OpenTelemetry Instrumentation
description: Send traces to SigNoz using OpenTelemetry instrumentation for PHP frameworks like Laravel, WordPress, Symfony, and Slim.
doc_type: howto
---

This guide shows you how to instrument your PHP application with OpenTelemetry and send traces to SigNoz. The auto-instrumentation approach works with Laravel, WordPress, Symfony, Slim, and other PHP frameworks.

<KeyPointCallout title="Using self-hosted SigNoz?" defaultCollapsed={true}>
Most steps are identical. To adapt this guide, update the endpoint and remove the ingestion key header as shown in [Cloud â†’ Self-Hosted](https://signoz.io/docs/ingestion/cloud-vs-self-hosted/#cloud-to-self-hosted).
</KeyPointCallout>

## Prerequisites

- PHP 8.0 or newer
- [PECL](https://pecl.php.net/) package manager
- [Composer](https://getcomposer.org/) dependency manager
- A SigNoz Cloud account or self-hosted SigNoz instance

## Send traces to SigNoz

<Tabs entityName="deployment">
<TabItem value="vm" label="VM" default>

<KeyPointCallout title="What classifies as VM?" defaultCollapsed={true}>
A VM is a virtual computer that runs on physical hardware. This includes:
- **Cloud VMs**: AWS EC2, Google Compute Engine, Azure VMs, DigitalOcean Droplets
- **On-premise VMs**: VMware, VirtualBox, Hyper-V, KVM
- **Bare metal servers**: Physical servers running Linux/Unix directly
</KeyPointCallout>

### Step 1. Set environment variables

```bash
export OTEL_PHP_AUTOLOAD_ENABLED=true
export OTEL_SERVICE_NAME=<service-name>
export OTEL_TRACES_EXPORTER=otlp
export OTEL_METRICS_EXPORTER=none
export OTEL_LOGS_EXPORTER=none
export OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
export OTEL_EXPORTER_OTLP_ENDPOINT=https://ingest.<region>.signoz.cloud:443
export OTEL_EXPORTER_OTLP_HEADERS=signoz-ingestion-key=<your-ingestion-key>
export OTEL_PROPAGATORS=baggage,tracecontext
```

<KeyPointCallout title="Why explicitly disable metrics and logs?" defaultCollapsed={true}>
The OpenTelemetry PHP SDK enables all three signals (traces, metrics, and logs) by default. Since this guide focuses on traces, we disable metrics and logs to avoid sending unwanted data to SigNoz.

If you want to collect metrics or logs later, change the respective exporter to `otlp` or remove the variable entirely.
</KeyPointCallout>

Verify these values:
- `<region>`: Your SigNoz Cloud region (`us`, `eu`, or `in`). See [endpoints](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint).
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: A descriptive name for your service (e.g., `payment-service`).

### Step 2. Install the OpenTelemetry extension

```bash
sudo apt-get install gcc make autoconf
pecl install opentelemetry
```

Add to `php.ini`:

```ini
extension=opentelemetry.so
```

Verify: `php --ri opentelemetry`

<Admonition type="info">
PHP needs the OpenTelemetry extension loaded globally so that all processes can access it, including those spawned by web servers or commands like `php artisan serve`. Without this, auto-instrumentation packages will fail to install and no traces will be generated.

Add `extension=opentelemetry.so` to your main `php.ini` file. Run `php --ini` to find its location.
</Admonition>

</TabItem>
<TabItem value="k8s" label="Kubernetes">

### Step 1. Set environment variables

Add these environment variables to your deployment manifest:

```yaml:deployment.yaml
env:
- name: OTEL_PHP_AUTOLOAD_ENABLED
  value: "true"
- name: OTEL_SERVICE_NAME
  value: "<service-name>"
- name: OTEL_TRACES_EXPORTER
  value: "otlp"
- name: OTEL_METRICS_EXPORTER
  value: "none"
- name: OTEL_LOGS_EXPORTER
  value: "none"
- name: OTEL_EXPORTER_OTLP_PROTOCOL
  value: "http/protobuf"
- name: OTEL_EXPORTER_OTLP_ENDPOINT
  value: "https://ingest.<region>.signoz.cloud:443"
- name: OTEL_EXPORTER_OTLP_HEADERS
  value: "signoz-ingestion-key=<your-ingestion-key>"
- name: OTEL_PROPAGATORS
  value: "baggage,tracecontext"
```

Verify these values:
- `<region>`: Your SigNoz Cloud region (`us`, `eu`, or `in`). See [endpoints](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint).
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: A descriptive name for your service.

### Step 2. Install the OpenTelemetry extension in your Dockerfile

```dockerfile
RUN pecl install opentelemetry \
    && docker-php-ext-enable opentelemetry
```

</TabItem>
<TabItem value="docker" label="Docker">

### Step 1. Set environment variables

Set in your Dockerfile:

```dockerfile
ENV OTEL_PHP_AUTOLOAD_ENABLED=true
ENV OTEL_SERVICE_NAME="<service-name>"
ENV OTEL_TRACES_EXPORTER="otlp"
ENV OTEL_METRICS_EXPORTER="none"
ENV OTEL_LOGS_EXPORTER="none"
ENV OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"
ENV OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.<region>.signoz.cloud:443"
ENV OTEL_EXPORTER_OTLP_HEADERS="signoz-ingestion-key=<your-ingestion-key>"
ENV OTEL_PROPAGATORS="baggage,tracecontext"
```

Or pass them at runtime:

```bash
docker run -d -p 8080:80 \
    -e OTEL_PHP_AUTOLOAD_ENABLED=true \
    -e OTEL_SERVICE_NAME="<service-name>" \
    -e OTEL_TRACES_EXPORTER="otlp" \
    -e OTEL_METRICS_EXPORTER="none" \
    -e OTEL_LOGS_EXPORTER="none" \
    -e OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf" \
    -e OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.<region>.signoz.cloud:443" \
    -e OTEL_EXPORTER_OTLP_HEADERS="signoz-ingestion-key=<your-ingestion-key>" \
    -e OTEL_PROPAGATORS="baggage,tracecontext" \
    <your-image>
```

Verify these values:
- `<region>`: Your SigNoz Cloud region (`us`, `eu`, or `in`). See [endpoints](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint).
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: A descriptive name for your service.

### Step 2. Install the OpenTelemetry extension in your Dockerfile

```dockerfile
RUN pecl install opentelemetry \
    && docker-php-ext-enable opentelemetry
```

</TabItem>
<TabItem value="windows" label="Windows">

### Step 1. Set environment variables

```powershell
$env:OTEL_PHP_AUTOLOAD_ENABLED = "true"
$env:OTEL_SERVICE_NAME = "<service-name>"
$env:OTEL_TRACES_EXPORTER = "otlp"
$env:OTEL_METRICS_EXPORTER = "none"
$env:OTEL_LOGS_EXPORTER = "none"
$env:OTEL_EXPORTER_OTLP_PROTOCOL = "http/protobuf"
$env:OTEL_EXPORTER_OTLP_ENDPOINT = "https://ingest.<region>.signoz.cloud:443"
$env:OTEL_EXPORTER_OTLP_HEADERS = "signoz-ingestion-key=<your-ingestion-key>"
$env:OTEL_PROPAGATORS = "baggage,tracecontext"
```

Verify these values:
- `<region>`: Your SigNoz Cloud region (`us`, `eu`, or `in`). See [endpoints](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint).
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: A descriptive name for your service.

### Step 2. Install the OpenTelemetry extension

1. Download the DLL from the <a href="https://github.com/open-telemetry/opentelemetry-php-instrumentation/releases" target="_blank" rel="noopener noreferrer nofollow">releases page</a>
2. Choose the version matching your PHP version and architecture (x64/x86, thread-safe/non-thread-safe)
3. Place the DLL in your PHP `ext` directory
4. Add to `php.ini`:
   ```ini
   extension=opentelemetry
   ```
5. Verify: `php --ri opentelemetry`

</TabItem>
</Tabs>

### Step 3. Install Composer dependencies

```bash
composer config allow-plugins.php-http/discovery false
composer require \
  open-telemetry/sdk \
  open-telemetry/exporter-otlp \
  php-http/guzzle7-adapter
```

<Admonition type="info">
For framework-specific auto-instrumentation, add the corresponding package. See [Framework instrumentation](#framework-instrumentation) below.
</Admonition>

### Step 4. Create a custom span (optional)

Without a framework auto-instrumentation package, you need to create spans manually. Here's a minimal example:

```php:app.php
<?php
require __DIR__ . '/vendor/autoload.php';

use OpenTelemetry\API\Globals;

$tracer = Globals::tracerProvider()->getTracer('my-app');
$span = $tracer->spanBuilder('handle-request')->startSpan();

try {
    $span->setAttribute('http.method', $_SERVER['REQUEST_METHOD'] ?? 'GET');
    // Your application logic here
    echo json_encode(['message' => 'Hello!']);
} finally {
    $span->end();
}
```

### Step 5. Run your application

```bash
php -S localhost:8080 app.php
```

## Framework instrumentation

OpenTelemetry PHP provides auto-instrumentation packages for popular frameworks and libraries. These packages automatically capture traces for HTTP requests, database queries, and other operations without requiring code changes.

<LibraryTabs
    className="mb-8"
    defaultCategory="all"
    defaultLibrary="laravel"
    categoryLabels={{
        frameworks: 'Frameworks',
        cms: 'CMS',
    }}
>
    <LibraryTab value="laravel" label="Laravel" category="frameworks">

        ### Additional package

        ```bash
        composer require open-telemetry/opentelemetry-auto-laravel
        ```

        ### Run command

        ```bash
        php artisan serve
        ```

        <a href="https://packagist.org/packages/open-telemetry/opentelemetry-auto-laravel" target="_blank" rel="noopener noreferrer nofollow">View package on Packagist</a>

    </LibraryTab>
    <LibraryTab value="symfony" label="Symfony" category="frameworks">

        ### Additional package

        ```bash
        composer require open-telemetry/opentelemetry-auto-symfony
        ```

        ### Run command

        ```bash
        symfony server:start
        ```

        Or with the built-in PHP server:

        ```bash
        php -S localhost:8080 -t public
        ```

        <a href="https://packagist.org/packages/open-telemetry/opentelemetry-auto-symfony" target="_blank" rel="noopener noreferrer nofollow">View package on Packagist</a>

    </LibraryTab>
    <LibraryTab value="wordpress" label="WordPress" category="cms">

        ### Additional package

        ```bash
        composer require open-telemetry/opentelemetry-auto-wordpress
        ```

        ### Configure autoloader (required)

        <Admonition type="warning">
        This step is required. Without configuring `auto_prepend_file`, WordPress will not generate any traces.
        </Admonition>

        For Apache, add to your WordPress `.htaccess` file:

        ```apache
        php_value auto_prepend_file /var/www/html/vendor/autoload.php
        ```

        For Nginx with PHP-FPM, add to your PHP-FPM pool configuration:

        ```ini
        php_admin_value[auto_prepend_file] = /var/www/html/vendor/autoload.php
        ```

        Replace the path with your actual WordPress installation path where `vendor/autoload.php` is located.

        ### Run command

        Restart your web server or PHP-FPM to apply changes.

        <a href="https://packagist.org/packages/open-telemetry/opentelemetry-auto-wordpress" target="_blank" rel="noopener noreferrer nofollow">View package on Packagist</a>

    </LibraryTab>
    <LibraryTab value="slim" label="Slim" category="frameworks">

        ### Additional package

        ```bash
        composer require open-telemetry/opentelemetry-auto-slim
        ```

        ### Run command

        ```bash
        php -S localhost:8080 public/index.php
        ```

        <a href="https://packagist.org/packages/open-telemetry/opentelemetry-auto-slim" target="_blank" rel="noopener noreferrer nofollow">View package on Packagist</a>

    </LibraryTab>
</LibraryTabs>

## Validate

With your application running, verify traces are being sent to SigNoz:

1. Trigger an action in your app that generates a web request. Hit the endpoint a few times.
2. In SigNoz, open the **Services** tab and click **Refresh**. Your application should appear.
3. Go to the **Traces** tab to see your application's traces.

<details>
<ToggleHeading>

## Troubleshooting

</ToggleHeading>

### Why don't traces appear in SigNoz?

**Check that the OpenTelemetry extension is loaded:**

```bash
php --ri opentelemetry
```

If you see "Extension 'opentelemetry' not present", the extension isn't installed correctly. Check your `php.ini` configuration.

**Check environment variables are set:**

```bash
echo $OTEL_EXPORTER_OTLP_ENDPOINT
echo $OTEL_SERVICE_NAME
```

**Verify network connectivity:**

```bash
curl -v https://ingest.<region>.signoz.cloud:443/v1/traces
```

**Enable console exporter to verify spans are being created:**

```bash
OTEL_TRACES_EXPORTER=console OTEL_PHP_AUTOLOAD_ENABLED=true php -S localhost:8080 app.php
```

If you see span output in your terminal but traces don't appear in SigNoz, the issue is with export configuration (endpoint, auth, or network). If no output appears, the instrumentation isn't capturing your requests.

### PECL installation fails

If `pecl install opentelemetry` fails:

1. Ensure build tools are installed (`gcc`, `make`, `autoconf`)
2. Check your PHP version is 8.0 or higher: `php -v`
3. Try installing with verbose output: `pecl install -v opentelemetry`

### Composer dependency conflicts

If you see dependency conflicts, try:

```bash
composer require open-telemetry/sdk --with-all-dependencies
```

</details>

<details>
<ToggleHeading>

## Setup OpenTelemetry Collector (Optional)

</ToggleHeading>

### What is the OpenTelemetry Collector?

Think of the OTel Collector as a middleman between your app and SigNoz. Instead of your application sending data directly to SigNoz, it sends everything to the Collector first, which then forwards it along.

### Why use it?

- **Cleaning up data**  - Filter out noisy traces you don't care about, or remove sensitive info before it leaves your servers.
- **Keeping your app lightweight**  - Let the Collector handle batching, retries, and compression instead of your application code.
- **Adding context automatically**  - The Collector can tag your data with useful info like which Kubernetes pod or cloud region it came from.
- **Future flexibility**  - Want to send data to multiple backends later? The Collector makes that easy without changing your app.

See [Switch from direct export to Collector](https://signoz.io/docs/opentelemetry-collection-agents/opentelemetry-collector/switch-to-collector/) for step-by-step instructions to convert your setup.

For more details, see [Why use the OpenTelemetry Collector?](https://signoz.io/docs/opentelemetry-collection-agents/opentelemetry-collector/why-to-use-collector/) and the [Collector configuration guide](https://signoz.io/docs/opentelemetry-collection-agents/opentelemetry-collector/configuration/).

</details>

## Next steps

- [Add manual instrumentation](https://signoz.io/docs/instrumentation/php/manual-instrumentation/) for custom spans and attributes
- [Set up alerts](https://signoz.io/docs/setup-alerts-notification/) for your PHP application
- [Create dashboards](https://signoz.io/docs/userguide/manage-dashboards/) to visualize metrics
- Explore [supported PHP instrumentation libraries](https://packagist.org/search/?query=open-telemetry&tags=instrumentation) for automatic instrumentation of additional frameworks and libraries

**Sample application**:
- <a href="https://github.com/SigNoz/OpenTelemetry-PHP-example" target="_blank" rel="noopener noreferrer nofollow">PHP sample app with OpenTelemetry</a>
- <a href="https://github.com/SigNoz/OpenTelemetry-laravel-example" target="_blank" rel="noopener noreferrer nofollow">Laravel sample app with OpenTelemetry</a>
