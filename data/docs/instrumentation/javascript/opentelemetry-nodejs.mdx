---
date: 2026-02-01
id: nodejs
title: Node.js OpenTelemetry Instrumentation
description: Learn how to instrument your Node.js application with OpenTelemetry and send telemetry data to SigNoz
doc_type: howto
---

This guide shows you how to instrument your Node.js or NestJS application with OpenTelemetry and send traces to SigNoz. You can use either zero-code automatic instrumentation or code-level setup depending on your needs.

<KeyPointCallout title="Using self-hosted SigNoz?" defaultCollapsed={true}>
Most steps are identical. To adapt this guide, update the endpoint and remove the ingestion key header as shown in [Cloud to Self-Hosted](https://signoz.io/docs/ingestion/cloud-vs-self-hosted/#cloud-to-self-hosted).
</KeyPointCallout>

## Prerequisites

- Node.js 14 or later
- A SigNoz Cloud account or self-hosted SigNoz instance

## Send traces to SigNoz

<Tabs entityName="deployment">
<TabItem value="vm" label="VM" default>

<KeyPointCallout title="What classifies as VM?" defaultCollapsed={true}>
A VM is a virtual computer that runs on physical hardware. This includes:
- **Cloud VMs**: AWS EC2, Google Compute Engine, Azure VMs, DigitalOcean Droplets
- **On-premise VMs**: VMware, VirtualBox, Hyper-V, KVM
- **Bare metal servers**: Physical servers running Linux/Unix directly

Use this section if you're deploying your Node.js application directly on a server or VM without containerization.
</KeyPointCallout>

### Step 1. Set environment variables

```bash
export OTEL_TRACES_EXPORTER="otlp"
export OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.<region>.signoz.cloud:443"
export OTEL_NODE_RESOURCE_DETECTORS="env,host,os"
export OTEL_SERVICE_NAME="<service-name>"
export OTEL_EXPORTER_OTLP_HEADERS="signoz-ingestion-key=<your-ingestion-key>"
export NODE_OPTIONS="--require @opentelemetry/auto-instrumentations-node/register"
```

Verify these values:
- `<region>`: Your [SigNoz Cloud region](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint)
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: Name of your service (e.g., `payment-service`).

### Step 2. Install OpenTelemetry packages

```bash
npm install --save @opentelemetry/api @opentelemetry/auto-instrumentations-node
```

### Step 3. Run the application

```bash
node app.js
```

<Admonition type="tip">
Need to enable or disable instrumentation for specific libraries? Check out our guide on [selective instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-selective-instrumentation/).
</Admonition>

</TabItem>

<TabItem value="k8s" label="Kubernetes">

<Tabs entityName="k8s-method">
<TabItem value="direct" label="Direct" default>

<KeyPointCallout title="Managing multiple services?" defaultCollapsed={true}>
Consider using the [OTel Operator](#otel-operator) for centralized instrumentation management across your cluster.
</KeyPointCallout>

### Step 1. Set environment variables

Add OpenTelemetry environment variables to your Kubernetes deployment manifest:

```yaml
env:
- name: OTEL_TRACES_EXPORTER
  value: 'otlp'
- name: OTEL_EXPORTER_OTLP_ENDPOINT
  value: 'https://ingest.<region>.signoz.cloud:443'
- name: OTEL_NODE_RESOURCE_DETECTORS
  value: 'env,host,os'
- name: OTEL_SERVICE_NAME
  value: '<service-name>'
- name: OTEL_EXPORTER_OTLP_HEADERS
  value: 'signoz-ingestion-key=<your-ingestion-key>'
- name: NODE_OPTIONS
  value: '--require @opentelemetry/auto-instrumentations-node/register'
```

Verify these values:
- `<region>`: Your [SigNoz Cloud region](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint)
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: Name of your service (e.g., `payment-service`).

### Step 2. Install OpenTelemetry packages

Ensure your application image includes the OpenTelemetry packages:

```bash
npm install --save @opentelemetry/api @opentelemetry/auto-instrumentations-node
```

### Step 3. Deploy and run

Apply your deployment to the cluster. The environment variables will configure OpenTelemetry automatically when your application starts.

<Admonition type="tip">
Need to enable or disable instrumentation for specific libraries? Check out our guide on [selective instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-selective-instrumentation/).
</Admonition>

</TabItem>
<TabItem value="otel-operator" label="OTel Operator">

The [OpenTelemetry Operator](https://signoz.io/docs/opentelemetry-collection-agents/k8s/otel-operator/overview/) auto-injects instrumentation into your Node.js pods without modifying your application image.

### Step 1. Set up the OpenTelemetry Operator

Install the Operator and Collector following the [K8s OTel Operator installation guide](https://signoz.io/docs/opentelemetry-collection-agents/k8s/otel-operator/install/).

### Step 2. Create the Instrumentation resource

Create `instrumentation.yaml` to configure Node.js auto-instrumentation:

```yaml:instrumentation.yaml
apiVersion: opentelemetry.io/v1alpha1
kind: Instrumentation
metadata:
  name: nodejs-instrumentation
spec:
  exporter:
    endpoint: http://otel-collector-collector:4318
  propagators:
    - tracecontext
    - baggage
  nodejs:
    image: ghcr.io/open-telemetry/opentelemetry-operator/autoinstrumentation-nodejs:latest
```

Deploy this resource to your cluster.

### Step 3. Add annotations to your deployment

Add these annotations to your pod template's `metadata.annotations`:

```yaml
instrumentation.opentelemetry.io/inject-nodejs: "true"
```

</TabItem>
</Tabs>

</TabItem>

<TabItem value="windows" label="Windows">

### Step 1. Set environment variables (PowerShell)

```powershell
$env:OTEL_TRACES_EXPORTER = "otlp"
$env:OTEL_EXPORTER_OTLP_ENDPOINT = "https://ingest.<region>.signoz.cloud:443"
$env:OTEL_NODE_RESOURCE_DETECTORS = "env,host,os"
$env:OTEL_SERVICE_NAME = "<service-name>"
$env:OTEL_EXPORTER_OTLP_HEADERS = "signoz-ingestion-key=<your-ingestion-key>"
$env:NODE_OPTIONS = "--require @opentelemetry/auto-instrumentations-node/register"
```

Verify these values:
- `<region>`: Your [SigNoz Cloud region](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint).
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: Name of your service.

### Step 2. Install OpenTelemetry packages

```bash
npm install --save @opentelemetry/api @opentelemetry/auto-instrumentations-node
```

### Step 3. Run the application

```powershell
node app.js
```

<Admonition type="tip">
Need to enable or disable instrumentation for specific libraries? Check out our guide on [selective instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-selective-instrumentation/).
</Admonition>

</TabItem>

<TabItem value="docker" label="Docker">

### Step 1. Add OpenTelemetry to your Dockerfile

```dockerfile:Dockerfile
# ... your existing build steps ...

# Install OpenTelemetry packages
RUN npm install @opentelemetry/api@^1.9.0 @opentelemetry/auto-instrumentations-node@^0.67.0

# Set OpenTelemetry environment variables
ENV OTEL_TRACES_EXPORTER="otlp"
ENV OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.<region>.signoz.cloud:443"
ENV OTEL_NODE_RESOURCE_DETECTORS="env,host,os"
ENV OTEL_SERVICE_NAME="<service-name>"
ENV OTEL_EXPORTER_OTLP_HEADERS="signoz-ingestion-key=<your-ingestion-key>"
ENV NODE_OPTIONS="--require @opentelemetry/auto-instrumentations-node/register"

# ... your CMD or ENTRYPOINT ...
```

Or pass them at runtime:

```bash
docker run \
  -e OTEL_TRACES_EXPORTER="otlp" \
  -e OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.<region>.signoz.cloud:443" \
  -e OTEL_NODE_RESOURCE_DETECTORS="env,host,os" \
  -e OTEL_SERVICE_NAME="<service-name>" \
  -e OTEL_EXPORTER_OTLP_HEADERS="signoz-ingestion-key=<your-ingestion-key>" \
  -e NODE_OPTIONS="--require @opentelemetry/auto-instrumentations-node/register" \
  your-image:latest
```

Verify these values:
- `<region>`: Your [SigNoz Cloud region](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint)
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: Name of your service (e.g., `payment-service`).

### Step 2. Build and run

```bash
docker build -t my-nodejs-app . && docker run -d -p 8080:8080 my-nodejs-app
```

<Admonition type="tip">
Need to enable or disable instrumentation for specific libraries? Check out our guide on [selective instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-selective-instrumentation/).
</Admonition>

</TabItem>
</Tabs>

## Validate

After running your instrumented application, verify traces appear in SigNoz:

1. Generate traffic by making requests to your application.
2. Open SigNoz and navigate to **Services**. Click **Refresh** and look for your service.
3. Go to **Traces** and apply filters to see your application's traces.

<details>
<ToggleHeading>
## Troubleshooting
</ToggleHeading>

### Enable debug logging

Set the log level to see detailed configuration and span information:

```bash
export OTEL_LOG_LEVEL=debug
```

Look for span output like this in your console:

```json
{
  "traceId": "985b66d592a1299f7d12ebca56ca1fe3",
  "parentId": "8d62a70aa335a227",
  "name": "bar",
  "id": "17ada85c3d55376a",
  "kind": 0,
  "timestamp": 1685674607399000,
  "duration": 299,
  "attributes": {},
  "status": { "code": 0 },
  "events": []
}
```

### Short-lived applications (Lambda/Serverless)

If your application exits quickly, explicitly shutdown the SDK to flush all spans:

```javascript
// Assumes 'sdk' is your NodeSDK instance from the setup
await sdk.shutdown();
```

### Service not appearing in SigNoz

- Verify your `OTEL_EXPORTER_OTLP_ENDPOINT` and `OTEL_EXPORTER_OTLP_HEADERS` are set correctly
- Check network connectivity to the SigNoz endpoint
- Ensure your application is receiving traffic (OpenTelemetry buffers data before sending)

</details>

<details>
<ToggleHeading>
## Code-Based Setup (Optional)
</ToggleHeading>

<KeyPointCallout title="When is this needed?" defaultCollapsed={true}>
Unlike env vars, code-based setup gives you full control over SDK initialization, like custom processors, advanced sampling, or pulling config from your app. This replaces the env var setup above. If switching from env vars, remove the `NODE_OPTIONS` line to avoid duplicate instrumentation.
</KeyPointCallout>

### Step 1. Install OpenTelemetry packages

```bash
npm install --save @opentelemetry/api@^1.9.0 \
  @opentelemetry/sdk-node@^0.208.0 \
  @opentelemetry/auto-instrumentations-node@^0.67.0 \
  @opentelemetry/exporter-trace-otlp-http@^0.208.0
```

### Step 2. Create the tracing file

<Tabs entityName="language">
<TabItem value="javascript" label="JavaScript" default>

```js:tracing.js
'use strict'
const process = require('process');
const opentelemetry = require('@opentelemetry/sdk-node');
const { getNodeAutoInstrumentations } = require('@opentelemetry/auto-instrumentations-node');
const { OTLPTraceExporter } = require('@opentelemetry/exporter-trace-otlp-http');
const { resourceFromAttributes } = require('@opentelemetry/resources');
const { ATTR_SERVICE_NAME } = require('@opentelemetry/semantic-conventions');

const exporterOptions = {
  url: 'https://ingest.<region>.signoz.cloud:443/v1/traces',
  headers: { 'signoz-ingestion-key': '<your-ingestion-key>' }
}

const traceExporter = new OTLPTraceExporter(exporterOptions);
const sdk = new opentelemetry.NodeSDK({
  traceExporter,
  instrumentations: [getNodeAutoInstrumentations()],
  resource: resourceFromAttributes({
    [ATTR_SERVICE_NAME]: '<service-name>'
  })
});

sdk.start();

process.on('SIGTERM', () => {
  sdk.shutdown()
    .then(() => console.log('Tracing terminated'))
    .catch((error) => console.log('Error terminating tracing', error))
    .finally(() => process.exit(0));
});
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```ts:tracing.ts
import process from 'process';
import * as opentelemetry from '@opentelemetry/sdk-node';
import { getNodeAutoInstrumentations } from '@opentelemetry/auto-instrumentations-node';
import { OTLPTraceExporter } from '@opentelemetry/exporter-trace-otlp-http';
import { resourceFromAttributes } from '@opentelemetry/resources';
import { ATTR_SERVICE_NAME } from '@opentelemetry/semantic-conventions';

const exporterOptions = {
  url: 'https://ingest.<region>.signoz.cloud:443/v1/traces',
  headers: { 'signoz-ingestion-key': '<your-ingestion-key>' }
}

const traceExporter = new OTLPTraceExporter(exporterOptions);
const sdk = new opentelemetry.NodeSDK({
  traceExporter,
  instrumentations: [getNodeAutoInstrumentations()],
  resource: resourceFromAttributes({
    [ATTR_SERVICE_NAME]: '<service-name>'
  })
});

sdk.start();

process.on('SIGTERM', () => {
  sdk.shutdown()
    .then(() => console.log('Tracing terminated'))
    .catch((error) => console.log('Error terminating tracing', error))
    .finally(() => process.exit(0));
});
```

</TabItem>
</Tabs>

Verify these values:
- `<region>`: Your [SigNoz Cloud region](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint)
- `<your-ingestion-key>`: Your SigNoz [ingestion key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service-name>`: Name of your service (e.g., `payment-service`).

### Step 3. Load the tracing file before your app

<Tabs entityName="language">
<TabItem value="javascript" label="JavaScript" default>

```bash
node -r ./tracing.js app.js
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

Import the tracing file at the top of your entry point:

```typescript
// index.ts or main.ts
import './tracing';
```

Then run:

```bash
npx ts-node src/index.ts
```

</TabItem>
</Tabs>

<Admonition type="tip">
Need to enable or disable instrumentation for specific libraries? Check out our guide on [selective instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-selective-instrumentation/?environment=code-level).
</Admonition>

</details>

<details>
<ToggleHeading>
## Setup OpenTelemetry Collector (Optional)
</ToggleHeading>

### What is the OpenTelemetry Collector?

The OTel Collector acts as a middleman between your app and SigNoz. Instead of sending data directly, your application sends everything to the Collector first, which then forwards it along.

### Why use it?

- **Cleaning up data** — Filter out noisy traces you don't care about, or remove sensitive info before it leaves your servers.
- **Keeping your app lightweight** — Let the Collector handle batching, retries, and compression instead of your application code.
- **Adding context automatically** — The Collector can tag your data with useful info like which Kubernetes pod or cloud region it came from.
- **Future flexibility** — Want to send data to multiple backends later? The Collector makes that easy without changing your app.

See [Switch from direct export to Collector](https://signoz.io/docs/opentelemetry-collection-agents/opentelemetry-collector/switch-to-collector/) for step-by-step instructions.

</details>

## Sample applications

- [Sample Node.js App](https://github.com/SigNoz/sample-nodejs-app)
- [Sample NestJS App](https://github.com/SigNoz/sample-NestJs-app)


## Next steps

- Complete your observability setup by sending [metrics](https://signoz.io/docs/metrics-management/send-metrics/applications/opentelemetry-nodejs/) and [logs](https://signoz.io/docs/logs-management/send-logs/nodejs-logs/) from your Node.js application.
- [Instrument the client-side of your app for traces](https://signoz.io/docs/frontend-monitoring/sending-traces-with-opentelemetry)
- [Capture frontend metrics, logs, and vitals](https://signoz.io/docs/frontend-monitoring)
- [Exclude HTTP Endpoints](https://signoz.io/docs/instrumentation/javascript/nodejs-exclude-http-endpoints/)
- [Selective Instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-selective-instrumentation/)
- [Manual Instrumentation](https://signoz.io/docs/instrumentation/javascript/nodejs-manual-instrumentation/)
