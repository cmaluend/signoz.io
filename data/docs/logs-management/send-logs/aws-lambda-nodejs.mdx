---
date: 2026-01-08
title: Send logs from AWS Lambda Node.js functions to SigNoz
description: Learn how to collect logs from AWS Lambda Node.js functions and send them correctly to SigNoz using OpenTelemetry.
id: aws-lambda-nodejs
doc_type: howto
---

## Overview

This guide explains how to instrument your AWS Lambda Node.js functions with OpenTelemetry to send logs directly to SigNoz. There are two primary approaches:

1.  **Application Logging**: Modifying your function code to send structured logs (best for business events).
2.  **Infrastructure Logging**: Collecting all `stdout`/`stderr` and platform logs automatically via an extension (best for full observability without code changes).

<Admonition type="info">
  This guide covers the **direct OpenTelemetry instrumentation** method using the OTel Lambda Layer.
  If you prefer to collect logs via CloudWatch Logs and S3, please refer to the [AWS Lambda Logs via
  S3](https://signoz.io/docs/aws-monitoring/lambda/lambda-logs/) guide.
</Admonition>

## Prerequisites

- An AWS account with permissions to create and manage Lambda functions.
- A SigNoz account (Cloud or Self-Hosted).

<KeyPointCallout title="Using self-hosted SigNoz?" defaultCollapsed={true}>
  Most steps are identical. To adapt this guide, update the endpoint and remove the ingestion key
  header as shown in [Cloud â†’
  Self-Hosted](https://signoz.io/docs/ingestion/cloud-vs-self-hosted/#cloud-to-self-hosted).
</KeyPointCallout>

## Steps

<Tabs>
<TabItem value="application" label="Application Logging (SDK)" default>

This method sends specific, structured application logs using the OpenTelemetry API. It provides fine-grained control over log attributes but requires code modification.

### Step 1: Add Required Dependencies

Add the necessary OpenTelemetry packages to your Node.js project.

```bash
yarn add @opentelemetry/api @opentelemetry/api-logs
```

### Step 2: Instrument Your Lambda Function

Update your Lambda function code to initialize the logger provider and send logs.

```javascript:index.js
const { trace } = require("@opentelemetry/api");
const logsAPI = require("@opentelemetry/api-logs");

// Initialize Logger Provider
const provider = logsAPI.logs.getLoggerProvider();
const logger = provider.getLogger("default", "1.0.0");

const tracer = trace.getTracer("default", "1.0.0");

exports.handler = async (event) => {
  const parentSpan = tracer.startSpan("main");

  // Example of creating a span and emitting a log within it
  tracer.startActiveSpan("process-request", (span) => {
    logger.emit({
      severityText: "INFO",
      body: "Processing request in Lambda",
      attributes: { "custom.attribute": "value" },
    });
    span.end();
  });

  const response = {
    statusCode: 200,
    body: JSON.stringify("Hello from SigNoz Lambda!"),
  };

  // IMPORTANT: Flush logs before the function exits
  await provider.forceFlush();
  parentSpan.end();

  return response;
};
```

**Key Points:**

- **`logger.emit`**: Used to send structured logs.
- **`provider.forceFlush()`**: Critical to ensure logs are sent before the Lambda environment freezes or shuts down.

### Step 3: Create Deployment Package

Zip your function code and dependencies.

```bash
zip -r deploy.zip .
```

### Step 4: Upload to AWS Lambda

1.  Navigate to your function in the [AWS Console](https://console.aws.amazon.com/lambda/).
2.  Go to the **Code** tab.
3.  Choose **Upload from** -> **.zip file** and upload your `deploy.zip`.

### Step 5: Configure Environment Variables

Navigate to **Configuration** > **Environment Variables** and add the following:

```environment
AWS_LAMBDA_EXEC_WRAPPER=/opt/otel-handler
OTEL_EXPORTER_OTLP_ENDPOINT=https://ingest.<region>.signoz.cloud:443
OTEL_EXPORTER_OTLP_HEADERS=signoz-ingestion-key=<SIGNOZ_INGESTION_KEY>
OTEL_SERVICE_NAME=<service_name>
```

Replace the placeholders:

- `<region>`: Your SigNoz Cloud [region](https://signoz.io/docs/ingestion/signoz-cloud/overview/#endpoint).
- `<SIGNOZ_INGESTION_KEY>`: Your [SigNoz Ingestion Key](https://signoz.io/docs/ingestion/signoz-cloud/keys/).
- `<service_name>`: A name for your Lambda service (e.g., `my-lambda-service`).

### Step 6: Add OpenTelemetry Lambda Layer

This layer provides the OpenTelemetry Node.js Extension for AWS Lambda with auto-instrumentation capabilities.

1.  Go to the **Layers** section of your function.
2.  Click **Add a layer**.
3.  Select **Specify an ARN**.
4.  Enter the ARN for your region and architecture, check the latest release from [OpenTelemetry Lambda Layers](https://github.com/open-telemetry/opentelemetry-lambda/releases) for the most current layer ARN for your region and architecture.

**Example ARN (Node.js, x86_64, us-east-1):**

```text
arn:aws:lambda:us-east-1:184161586896:layer:opentelemetry-nodejs-0_19_0:1
```

</TabItem>
<TabItem value="infrastructure" label="Infrastructure Logging (No Code)">

This method captures everything written to `stdout` and `stderr` (e.g., `console.log`) as well as AWS Platform logs (REPORT, START, END). It requires zero code changes.

### Step 1: Create a Collector Configuration File

By default, the OpenTelemetry layer exports to AWS backends. To send logs to SigNoz and enable the [`telemetryapi`](https://github.com/open-telemetry/opentelemetry-lambda/blob/main/collector/receiver/telemetryapireceiver/README.md) receiver (which captures Lambda logs), you must provide a custom configuration.

Go to AWS Lambda Console, in your Lambda function, go to **Code** tab and create a file named `collector.yaml` in the root of your function code:

```yaml:collector.yaml
receivers:
  telemetryapi:
    types: ["function", "platform"] # Filter options: platform, function, extension

exporters:
  otlphttp:
    endpoint: https://ingest.<region>.signoz.cloud:443
    headers:
      signoz-ingestion-key: <SIGNOZ_INGESTION_KEY>

processors:
  batch:
  decouple: # Required for Lambda - allows function to return while data is still being exported

service:
  pipelines:
    logs:
      receivers: [telemetryapi]
      processors: [batch, decouple]
      exporters: [otlphttp]
```

You can remove the `types` field if you want to capture all types of logs including platform, function and extension logs.

<Admonition type="note">
  The `OPENTELEMETRY_COLLECTOR_CONFIG_URI` supports local paths (e.g. `/var/task/collector.yaml`),
  HTTP/HTTPS URIs, and S3 URIs. If using a local file, ensure it is included in your deployment
  package (root directory).
</Admonition>

### Step 2: Add OpenTelemetry Lambda Layer

1.  Navigate to your function in the [AWS Console](https://console.aws.amazon.com/lambda/).
2.  Scroll to the **Layers** section and click **Add a layer**.
3.  Select **Specify an ARN**.
4.  Enter the ARN from [OpenTelemetry Lambda Layers](https://github.com/open-telemetry/opentelemetry-lambda/releases), look for the `layer-collector` release.

**Example ARN (Node.js, x86_64, us-east-1):**

```text
arn:aws:lambda:us-east-1:184161586896:layer:opentelemetry-collector-amd64-0_19_0:1
```

### Step 3: Configure Environment Variables

Navigate to **Configuration** > **Environment Variables** and configure the collector setup:

| Key                                  | Value                      | Description                                                                                 |
| ------------------------------------ | -------------------------- | ------------------------------------------------------------------------------------------- |
| `OPENTELEMETRY_COLLECTOR_CONFIG_URI` | `/var/task/collector.yaml` | **Crucial**: Points to your custom config file. Supports local path, HTTP/HTTPS, or S3 URI. |
| `OTEL_SERVICE_NAME`                  | `<service_name>`           | A name for your Lambda service.                                                             |

<Admonition type="note">
  If S3 URI is used, ensure the S3 bucket is accessible from the Lambda function by creating
  relevant IAM roles and permissions.
</Admonition>

</TabItem>
</Tabs>

## Validate

1.  Trigger your Lambda function (e.g., using a Test event in the AWS Console).
2.  Go to the SigNoz Logs Explorer.
3.  Filter by `service.name`.
4.  **Result**:
    - **Application Logging**: You should see your specific log attributes (e.g., `custom.attribute`).
    - **Infrastructure Logging**: You should see your standard console output (e.g., `Hello World`) and AWS Platform logs (`REPORT RequestId: ...`).

<details>
<ToggleHeading>

## Troubleshooting

</ToggleHeading>

### Logs not appearing in SigNoz

- **Check Config URI**: Ensure `OPENTELEMETRY_COLLECTOR_CONFIG_URI` matches exactly where your `collector.yaml` is deployed (usually `/var/task/collector.yaml`).
- **Check Region**: Ensure the endpoint region matches your SigNoz account region.
- **Check CloudWatch**: Look at the AWS CloudWatch logs for your Lambda function. The OpenTelemetry layer output starts with "OpenTelemetry Collector". If you see errors there, it usually indicates connection issues or bad config.

### "Task timed out" error

- **Increase Timeout**: Data transmission can take a moment. Increase your Lambda function's timeout setting (e.g., to 30 seconds or 1 minute) if it's too short.

</details>

## Related Guides

- [Send Logs via S3 Forwarder](https://signoz.io/docs/aws-monitoring/lambda/lambda-logs/)
- [AWS Lambda Integration](https://signoz.io/docs/integrations/aws/lambda/)
