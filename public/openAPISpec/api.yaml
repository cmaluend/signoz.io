openapi: 3.0.0
info:
  description: |

    # Introduction
    This API is documented in **OpenAPI format**. In addition to standard
    OpenAPI syntax we use a few [vendor extensions](https://github.com/Redocly/redoc/blob/master/docs/redoc-vendor-extensions.md).

    # Authentication

    SigNoz offers below forms of authentication:
      - API Key

    <SecurityDefinitions />

  version: 0.0.0
  title: SigNoz API
  termsOfService: 'https://signoz.io/terms-of-service/'
  contact:
    name: API Support
    email: support@signoz.io
    url: https://signoz.io
servers:
  - url: 'https://your-workspace-url'
tags:
  - name: alerts
    description: Alerts API
  - name: dashboards
    description: Access to dashboards
  - name: export
    description: Export raw data from logs, traces, and metrics
  - name: alerts_model
    x-displayName: The Alerts Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Alert" />
  - name: dashboards_model
    x-displayName: The Dashboards Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Dashboard" />
  - name: fields
    description: Fields of Logs, Traces
  - name: channels
    description: Operations related to notification channels
  - name: route_policies
    description: Operations related to notification routing policies
x-tagGroups:
  - name: General
    tags:
      - alerts
      - dashboards
      - export
  - name: Models
    tags:
      - alerts_model
      - dashboards_model
  - name: Notification
    tags:
      - channels
      - route_policies
paths:
  '/api/v1/logs/fields':
    post:
      tags:
        - fields
      summary: Convert a log field to a selected field
      description: Convert a log field to a selected field
      operationId: updateLogField
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      responses:
        '400':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/Field'
    get:
      tags:
        - fields
      summary: Get all log fields
      description: ''
      operationId: getLogFields
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Field'
  '/api/v2/traces/fields':
    post:
      tags:
        - fields
      summary: Convert a trace field to a selected field
      description: Convert a trace field to a selected field
      operationId: updateTraceField
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      responses:
        '400':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/Field'
    get:
      tags:
        - fields
      summary: Get all trace fields
      description: ''
      operationId: getTraceFields
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Field'
  '/api/v1/export_raw_data':
    get:
      tags:
        - export
      summary: Export raw telemetry data
      description: |
        Export raw data from logs in CSV or JSONL format. This endpoint streams data 
        in chunks and is designed for exporting large datasets efficiently.
        
        **Note:** Currently only logs export is fully supported. Traces and metrics export are not yet available.
        
        **Response Format:**
        - CSV: Headers in first row, data in subsequent rows
        - JSONL: One JSON object per line (JSON Lines format)
        
        **Response Headers:**
        - `Content-Type`: "text/csv" or "application/x-ndjson"
        - `Content-Disposition`: "attachment; filename=\"data_exported_[timestamp].[format]\""
        - `X-Response-Complete`: "true" if all data exported, "false" if truncated due to size limits
        - `Transfer-Encoding`: "chunked" (data is streamed)
        
        **Limits:**
        - Maximum rows: 50,000
        - Maximum response size: ~1GB
        - If either limit is reached, the response will be truncated and `X-Response-Complete` header will be `false`
        
        **Examples:**
        
        Basic CSV export:
        ```
        GET /api/v1/export_raw_data?start=1693612800000000000&end=1693699199000000000
        ```
        
        Export with specific columns and format:
        ```
        GET /api/v1/export_raw_data?start=1693612800000000000&end=1693699199000000000&format=jsonl&columns=log.timestamp&columns=log.body&columns=log.severity_text
        ```
        
        Export with filter and ordering:
        ```
        GET /api/v1/export_raw_data?start=1693612800000000000&end=1693699199000000000&filter='severity="error"'&order_by=timestamp:desc&limit=1000
        ```
      operationId: exportRawData
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: false
          description: API key for authentication (alternative to Bearer token)
          schema:
            type: string
          example: '<TOKEN>'
        - name: Authorization
          in: header
          required: false
          description: 'Bearer token for authentication (alternative to API key). Format: "Bearer <token>"'
          schema:
            type: string
          example: 'Bearer eyJhbGc...'
        - name: source
          in: query
          description: Type of data to export. Currently only "logs" is fully supported.
          required: false
          schema:
            type: string
            enum:
              - logs
              - traces
              - metrics
            default: logs
          example: logs
        - name: format
          in: query
          description: Output format for the exported data
          required: false
          schema:
            type: string
            enum:
              - csv
              - jsonl
            default: csv
          example: csv
        - name: start
          in: query
          description: Start time for the query (Unix timestamp in nanoseconds)
          required: true
          schema:
            type: integer
            format: int64
          example: 1693612800000000000
        - name: end
          in: query
          description: End time for the query (Unix timestamp in nanoseconds)
          required: true
          schema:
            type: integer
            format: int64
          example: 1693699199000000000
        - name: limit
          in: query
          description: |
            Maximum number of rows to export. Must be positive and cannot exceed 50,000.
            Default is 10,000 if not specified.
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50000
            default: 10000
          example: 10000
        - name: filter
          in: query
          description: |
            Filter expression to apply to the query. Uses the same filter syntax as the query builder.
            Example: `severity="error"` or `service.name="frontend" AND http.status_code>=500`
          required: false
          schema:
            type: string
          example: 'severity="error"'
        - name: columns
          in: query
          description: |
            Specific columns/fields to include in the export. Can be specified multiple times for multiple columns.
            If not specified, all columns are returned.
            
            Format options:
            - `log.field` - Log field (e.g., "log.timestamp", "log.body", "log.severity_text")
            - `attribute.field` - Attribute field (e.g., "attribute.http.method", "attribute.user.id")
            - `resource.field` - Resource field (e.g., "resource.service.name", "resource.cloud.account.id")
            - `log.field:type` - Field with type specification (e.g., "log.trace_id:string", "attribute.amount:number")
            - `attribute.field:type` - Attribute with type (e.g., "attribute.StatusCode:string")
            - `resource.field:type` - Resource with type (e.g., "resource.cloud.account.id:string")
            
            Common data types: string, number, bool
          required: false
          schema:
            type: array
            items:
              type: string
          example: ['log.timestamp', 'log.body', 'log.trace_id:string', 'attribute.http.method:string', 'resource.service.name:string']
        - name: order_by
          in: query
          description: |
            Sorting specification for the results. Can be specified multiple times for multiple sort keys.
            
            Format options:
            - `column:direction` - Simple format (e.g., "timestamp:desc")
            - `context.field:type:direction` - Full format (e.g., "attribute.duration:float64:asc")
            
            Direction: "asc" (ascending) or "desc" (descending)
            
            Default: ["timestamp:desc", "id:desc"]
          required: false
          schema:
            type: array
            items:
              type: string
          example: ['timestamp:desc']
      responses:
        '200':
          description: |
            Data export stream. The response is streamed in chunks as data is processed.
          headers:
            Content-Type:
              description: MIME type of the response
              schema:
                type: string
                enum:
                  - text/csv
                  - application/x-ndjson
            Content-Disposition:
              description: Attachment filename for the download
              schema:
                type: string
                example: 'attachment; filename="data_exported_2024-01-15_143052.csv"'
            Transfer-Encoding:
              description: Data is transferred in chunks
              schema:
                type: string
                enum:
                  - chunked
          content:
            text/csv:
              schema:
                type: string
                format: binary
              example: |
                timestamp,severity,message,service.name
                2024-01-15T14:30:52Z,ERROR,Connection timeout,frontend
                2024-01-15T14:30:51Z,WARN,Slow query detected,backend
            application/x-ndjson:
              schema:
                type: string
                format: binary
              example: |
                {"timestamp":"2024-01-15T14:30:52Z","severity":"ERROR","message":"Connection timeout","service.name":"frontend"}
                {"timestamp":"2024-01-15T14:30:51Z","severity":"WARN","message":"Slow query detected","service.name":"backend"}
        '400':
          description: |
            Bad request - Invalid input parameters
            
            Common errors:
            - Missing required parameters (start, end)
            - Invalid time format
            - Invalid limit value (must be positive and <= 50,000)
            - Invalid format (must be csv or jsonl)
            - Invalid source (only logs is currently supported)
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "invalid limit: limit must be positive"
        '401':
          description: Unauthorized - Invalid or missing API key or Bearer token
        '500':
          description: Internal server error
  '/api/v1/rules':
    post:
      tags:
        - alerts
      summary: Add a alert rule to the system
      description: Add a alert rule to the system
      operationId: createRule
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      responses:
        '400':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/Alert'
    get:
      tags:
        - alerts
      summary: Get all alert rules
      description: ''
      operationId: getRules
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'
  '/api/v1/rules/{id}':
    get:
      tags:
        - alerts
      summary: Find alert rule by ID
      description: Returns a single alert rule
      operationId: getRuleById
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
        - name: id
          in: path
          description: ID of alert rule to return
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'
        '400':
          description: Invalid ID supplied
        '404':
          description: Alert not found
    put:
      tags:
        - alerts
      summary: Update an existing alert rule
      description: ''
      operationId: updateRule
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'

        - name: id
          in: path
          description: ID of alert rule to update
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '400':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/Alert'
    delete:
      tags:
        - alerts
      summary: Deletes a alert rule
      description: ''
      operationId: deleteRule
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
        - name: id
          in: path
          description: Alert rule id to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '400':
          description: Invalid ID supplied
  '/api/v1/dashboards':
    post:
      tags:
        - dashboards
      summary: Add a dashboard to the system
      description: Add a dashboard to the system
      operationId: createDashboard
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'

      responses:
        '400':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/Dashboard'
    get:
      tags:
        - dashboards
      summary: Get all dashboards
      description: ''
      operationId: getDashboards
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'

      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dashboard'
  '/api/v1/dashboards/{uuid}':
    get:
      tags:
        - dashboards
      summary: Find dashboard by UUID
      description: Returns a single dashboard
      operationId: getDashboardByUUID
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
        - name: uuid
          in: path
          description: UUID of dashboard to return
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dashboard'
        '400':
          description: Invalid ID supplied
        '404':
          description: Dashboard not found
    put:
      tags:
        - dashboards
      summary: Update an existing dashboard
      description: ''
      operationId: updateDashboard
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'

        - name: uuid
          in: path
          description: UUID of dashboard to update
          required: true
          schema:
            type: string
      responses:
        '400':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/Dashboard'
    delete:
      tags:
        - dashboards
      summary: Delete a dashboard
      description: ''
      operationId: deleteDashboard
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
        - name: uuid
          in: path
          description: UUID of dashboard to delete
          required: true
          schema:
            type: string
      responses:
        '400':
          description: Invalid ID supplied
  '/api/v4/query_range':
    post:
      tags:
        - query_range
      summary: v4 - Query metrics, logs, or traces over a time range
      description: |
        ***Note**: This API is planned to be deprecated. Please use `/api/v5/query_range` instead.*
        
        Provides a unified interface to query metrics, logs, and traces data with different query types.
        Supports three query types:
        * `builder` - Query builder for logs, traces, and metrics
        * `clickhouse_sql` - Raw SQL queries (recommended to use this only when you need to use complex queries that are not supported by the query builder)
        * `promql` - PromQL queries (uses Prometheus remote read with ClickHouse as the backend, slower than the query builder)
      operationId: queryRangeV4
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRangeParams'
      responses:
        '200':
          description: Query results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryRangeResponse'
        '400':
          description: Bad request parameters
        '500':
          description: Internal server error

  '/api/v5/query_range':
    post:
      tags:
        - query_range
      summary: v5 - Query metrics, logs, or traces over a time range
      description: |
        Provides a unified interface to query metrics, logs, and traces data with different query types.
        Supports multiple query types:
        * `builder_query` - Query builder query representation for logs, traces, and metrics
        * `builder_formula` - Formula expressions combining multiple queries
        * `builder_trace_operator` - Trace-specific operators for span relationships
        * `clickhouse_sql` - Raw SQL queries (use only when needed for complex queries)
        * `promql` - PromQL queries (uses Prometheus remote read, slower than query builder)

        See examples;

        Logs - https://signoz.io/docs/logs-management/logs-api/payload-model/

        Traces - https://signoz.io/docs/traces-management/trace-api/payload-model/

        Metrics - https://signoz.io/docs/metrics-management/query-range-api/
      operationId: queryRangeV5
      parameters:
        - name: SIGNOZ-API-KEY
          in: header
          required: true
          schema:
            type: string
          example: '<TOKEN>'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRangeRequestV5'
      responses:
        '200':
          description: Query results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryRangeResponseV5'
        '400':
          description: Bad request parameters
        '500':
          description: Internal server error

  /api/v1/channels:
    get:
      tags:
        - channels
      summary: List all notification channels
      description: Retrieve a list of all configured notification channels.
      operationId: listChannels
      security:
        - api_key: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Channel'
        '500':
          description: Internal server error

    post:
      tags:
        - channels
      summary: Create a new notification channel
      description: Create a new notification channel with the provided configuration.
      operationId: createChannel
      security:
        - api_key: []
      requestBody:
        description: Channel configuration object
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Receiver'
      responses:
        '204':
          description: Channel created successfully
        '400':
          description: Bad request parameters
        '500':
          description: Internal server error

  /api/v1/channels/{id}:
    get:
      tags:
        - channels
      summary: Get a notification channel by ID
      description: Retrieve details of a specific notification channel by its ID.
      operationId: getChannelById
      security:
        - api_key: []
      parameters:
        - name: id
          in: path
          description: ID of the channel to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  data:
                    $ref: '#/components/schemas/Channel'
        '404':
          description: Channel not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error

    put:
      tags:
        - channels
      summary: Update a notification channel
      description: Update an existing notification channel by its ID.
      operationId: updateChannel
      security:
        - api_key: []
      parameters:
        - name: id
          in: path
          description: ID of the channel to update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Updated channel configuration object
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Receiver'
      responses:
        '204':
          description: Channel updated successfully
        '400':
          description: Bad request parameters
        '404':
          description: Channel not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error

    delete:
      tags:
        - channels
      summary: Delete a notification channel
      description: Delete a notification channel by its ID.
      operationId: deleteChannel
      security:
        - api_key: []
      parameters:
        - name: id
          in: path
          description: ID of the channel to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Channel deleted successfully
        '404':
          description: Channel not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error

  /api/v1/testChannel:
    post:
      tags:
        - channels
      summary: Test a notification channel
      description: Test a notification channel configuration by sending a test alert.
      operationId: testChannel
      security:
        - api_key: []
      requestBody:
        description: Channel configuration to test
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Receiver'
      responses:
        '204':
          description: Test alert sent successfully
        '400':
          description: Bad request parameters
        '500':
          description: Internal server error

  /api/v1/route_policies:
    get:
      tags:
        - route_policies
      summary: Get all route policies
      description: Retrieve a list of all configured route policies.
      operationId: getAllRoutePolicies
      security:
        - api_key: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoutePoliciesResponse'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

    post:
      tags:
        - route_policies
      summary: Create route policy
      description: Create a new route policy.
      operationId: createRoutePolicy
      security:
        - api_key: []
      requestBody:
        description: Route policy to create
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutePolicyInput'
      responses:
        '201':
          description: Route policy created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoutePolicyResponse'
        '400':
          description: Bad request parameters
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /api/v1/route_policies/{id}:
    get:
      tags:
        - route_policies
      summary: Get route policy by ID
      description: Retrieve a single route policy by its ID.
      operationId: getRoutePolicyById
      security:
        - api_key: []
      parameters:
        - name: id
          in: path
          description: ID of the route policy to retrieve
          required: true
          schema:
            type: string
            format: uuid
            example: "019ae364-e7ab-785e-a208-cacc8c39e752"
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoutePolicyResponse'
        '401':
          description: Unauthorized
        '404':
          description: Route policy not found
        '500':
          description: Internal server error

    put:
      tags:
        - route_policies
      summary: Update route policy
      description: Update an existing route policy by its ID.
      operationId: updateRoutePolicy
      security:
        - api_key: []
      parameters:
        - name: id
          in: path
          description: ID of the route policy to update
          required: true
          schema:
            type: string
            format: uuid
            example: "019ae364-e7ab-785e-a208-cacc8c39e752"
      requestBody:
        description: Route policy data to update
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutePolicyInput'
      responses:
        '200':
          description: Route policy updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoutePolicyResponse'
        '400':
          description: Bad request parameters
        '401':
          description: Unauthorized
        '404':
          description: Route policy not found
        '500':
          description: Internal server error

    delete:
      tags:
        - route_policies
      summary: Delete route policy
      description: Delete a route policy by its ID.
      operationId: deleteRoutePolicy
      security:
        - api_key: []
      parameters:
        - name: id
          in: path
          description: ID of the route policy to delete
          required: true
          schema:
            type: string
            format: uuid
            example: "019ae364-e7ab-785e-a208-cacc8c39e752"
      responses:
        '204':
          description: Route policy deleted successfully
        '401':
          description: Unauthorized
        '404':
          description: Route policy not found
        '500':
          description: Internal server error

components:
  schemas:
    Field:
      type: object
      properties:
        name:
          type: string
        dataType:
          type: string
        type:
          type: string
          enum: ["static"]
        selected:
          type: boolean
          enum: [true]
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          format: int32
        type:
          type: string
        message:
          type: string
    PromQL:
      type: object
      description: PromQL for the widget
      required:
        - query
        - name
        - disabled
      properties:
        disabled:
          type: boolean
          description: Whether the PromQL query is disabled or not
        name:
          type: string
          description: Name for the query (alphabet letter used in the UI, e.g. A, B, C, etc.)
        query:
          type: string
          description: PromQL query expression
        legend:
          type: string
          description: Legend for the query
    BuilderQueryDashboard:
      type: object
      description: Builder query for the widget
      properties:
        queryData:
          type: object
          description: Query data for the widget. Populate with non-formula queries.
          $ref: '#/components/schemas/BuilderQuery'
        queryFormulas:
          type: object
          description: Query formulas for the widget. Populate with formula queries.
          $ref: '#/components/schemas/BuilderQuery'
    ClickhouseSQL:
      type: object
      description: Clickhouse SQL for the widget
      required:
        - query
        - name
        - disabled
      properties:
        disabled:
          type: boolean
          description: Whether the Clickhouse SQL is disabled or not
        name:
          type: string
          description: Name for the query (alphabet letter used in the UI, e.g. A, B, C, etc.)
        query:
          type: string
          description: Clickhouse SQL query for the widget
        legend:
          type: string
          description: Legend for the query
    Widget:
      type: object
      description: Widget for the dashboard
      required:
        - id
        - panelTypes
        - title
        - query
      properties:
        id:
          type: string
          description: ID for the widget
        description:
          type: string
          description: Description for the widget
        isStacked:
          type: boolean
          description: Whether the widget is stacked or not
        nullZeroValues:
          type: boolean
          description: Whether the widget has null zero values or not
        opacity:
          type: integer
          description: Opacity for the widget
        panelTypes:
          type: string
          description: Panel type for the widget. (graph - time series chart, table - table, value - single value, list - list of values, trace - trace view)
          enum:
            - 'graph'
            - 'table'
            - 'value'
            - 'list'
            - 'trace'
        timePreferance:
          type: string
          description: Time preferance for the widget
          enum:
            - 'GLOBAL_TIME'
        title:
          type: string
          description: Title for the widget
        yAxisUnit:
          type: string
          description: Y axis unit for the widget
        query:
          type: object
          description: Query for the widget. The query type can be builder, clickhouse_sql or promql
          required:
            - queryType
          properties:
            queryType:
              type: string
              description: Query type for the widget
              enum:
                - 'builder'
                - 'clickhouse_sql'
                - 'promql'
            promql:
              type: array
              description: PromQL for the widget
              items:
                $ref: '#/components/schemas/PromQL'
            clickhouse_sql:
              type: array
              description: Clickhouse SQL for the widget
              items:
                $ref: '#/components/schemas/ClickhouseSQL'
            builder:
              type: object
              description: Builder query for the widget
              $ref: '#/components/schemas/BuilderQueryDashboard'
    Dashboard:
      type: object
      required:
        - title
        - layout
        - widgets
      properties:
        title:
          type: string
          description: Title of the dashboard
        description:
          type: string
          description: Description of the dashboard
        tags:
          type: array
          description: Tags for the dashboard
          items:
            type: string
        layout:
          type: array
          description: Layout for the dashboard
          items:
            type: object
            properties:
              x:
                type: integer
                description: X coordinate for the layout
              y:
                type: integer
                description: Y coordinate for the layout
              w:
                type: integer
                description: Width for the layout
              h:
                type: integer
                description: Height for the layout
              i:
                type: string
                description: ID for the layout
              moved:
                type: boolean
                description: Whether the layout is moved or not
              static:
                type: boolean
                description: Whether the layout is static or not
        variables:
          type: object
          description: Variables for the dashboard
          properties:
            key:
              type: object
              description: Key for the variable
              properties:
                id:
                  type: string
                  description: ID for the variable
                name:
                  type: string
                  description: Name for the variable
                description:
                  type: string
                  description: Description for the variable
                key:
                  type: string
                  description: Key for the variable, use same as name
                type:
                  type: string
                  description: Type for the variable
                  enum:
                    - 'QUERY'
                    - 'CONSTANT'
                queryValue:
                  type: string
                  description: Query for the variable
                allSelected:
                  type: boolean
                  description: Whether all the values are selected or not
                customValue:
                  type: string
                  description: Custom value for the variable
                multiSelect:
                  type: boolean
                  description: Whether the variable is multi select or not
                order:
                  type: integer
                  description: Order for the variable
                showALLOption:
                  type: boolean
                  description: Whether to show all option or not
                sort:
                  type: string
                  description: Sort for the variable
                  enum:
                    - 'ASC'
                    - 'DESC'
                textboxValue:
                  type: string
                  description: Textbox value for the variable
        widgets:
          type: array
          description: Widgets for the dashboard
          items:
            $ref: '#/components/schemas/Widget'
      xml:
        name: Dashboard
    DataSource:
      type: string
      enum:
        - metrics
        - logs
        - traces
    AggregateOperator:
      type: string
      enum:
        - 'count'
        - 'count_distinct'
        - 'sum'
        - 'avg'
        - 'min'
        - 'max'
        - 'p05'
        - 'p10'
        - 'p20'
        - 'p25'
        - 'p50'
        - 'p75'
        - 'p90'
        - 'p95'
        - 'p99'
        - 'rate'
        - 'sum_rate'
        - 'avg_rate'
        - 'min_rate'
        - 'max_rate'
        - 'rate_sum'
        - 'rate_avg'
        - 'rate_min'
        - 'rate_max'
        - 'hist_quantile_50'
        - 'hist_quantile_75'
        - 'hist_quantile_90'
        - 'hist_quantile_95'
        - 'hist_quantile_99'
    Attribute:
      type: object
      properties:
        key:
          type: string
          description: Key for the attribute
        type:
          type: string
          description: Type of the attribute. Can be tag, resource or empty. `tag` for event level attributes, `resource` for resource level attributes.
          enum:
            - 'tag'
            - 'resource'
            - ''
        dataType:
          type: string
          description: Data type of the attribute. It nothing specified, string type will be assumed.
          enum:
            - 'string'
            - 'int64'
            - 'float64'
            - 'bool'
            - 'array(string)'
            - 'array(int64)'
            - 'array(float64)'
            - 'array(bool)'
        isColumn:
          type: boolean
          description: Whether the attribute is a materialized column or not. Helps in faster querying.
        isJSON:
          type: boolean
          description: Whether the attribute is a JSON or not. Applicable to logs only. When working with nested JSON, set this to true.
    Filter:
      type: object
      description: Filter for the query
      properties:
        key:
          type: object
          description: Key for the filter
          $ref: '#/components/schemas/Attribute'
        value:
          type: any
          description: Value for the filter. This can be single value or an array of values. For `in` and `nin` operators, this should be an array of values.
        op:
          type: string
          description: Operator for the filter
          enum:
            - '='
            - '!='
            - '>'
            - '>='
            - '<'
            - '<='
            - 'in'
            - 'nin'
            - 'like'
            - 'nlike'
            - 'contains'
            - 'ncontains'
            - 'regex'
            - 'nregex'
            - 'exists'
            - 'nexists'
            - 'has'
            - 'nhas'
    ReduceToOperator:
      type: string
      description: Reduce to operator for the query. When the panel type is value. All the values in time range will be reduced to one value.
      enum:
        - 'sum'
        - 'avg'
        - 'min'
        - 'max'
        - 'last'
    BuilderQueryAlert:
      type: object
      description: Builder query for the alert
      properties:
        queryName:
          type: object
          description: Name of the query
          $ref: '#/components/schemas/BuilderQuery'
    AlertType:
      type: string
      enum:
        - LOGS_BASED_ALERT
        - METRIC_BASED_ALERT
        - TRACES_BASED_ALERT
        - EXCEPTIONS_BASED_ALERT
    RuleType:
      type: string
      description: Use "promql_rule" for promql based alert otherwise use "threshold_rule"
      enum:
        - threshold_rule
        - promql_rule
    MatchType:
      type: string
      description: Type of the match ("1" - At least once i.e if the condition is met at least once in the time range, "2" - All the times i.e if the condition is met every time in the time range, "3" - On average i.e if the condition is met on average in the time range, "4" - In total i.e if the condition is met in total in the time range, "5" - Last value i.e if the condition is met in the last value of the time range)
      enum:
        - '0'
        - '1'
        - '2'
        - '3'
        - '4'
        - '5'
    CompareOpType:
      type: string
      description: Type of the comparision operation ("1" - Value is above, "2" - Value is below, "3" - Equal to, "4" - Not equal to)
      enum:
        - '0'
        - '1'
        - '2'
        - '3'
        - '4'
    Condition:
      type: object
      required:
        - target
        - matchType
        - op
        - compositeQuery
      properties:
        target:
          description: Target value for the condition. The "Alert Threshold" from the alert configuration UI.
          type: number
        matchType:
          description: Type of the match
          oneOf:
            - $ref: '#/components/schemas/MatchType'
        op:
          description: Type of the comparison operation
          oneOf:
            - $ref: '#/components/schemas/CompareOpType'
        compositeQuery:
          description: Composite query for the condition
          allOf:
            - $ref: '#/components/schemas/CompositeQuery'
        targetUnit:
          description: Unit of the target. This the unit of the target value for the condition - corresponds to "Targer Unit" from the alert configuration UI.
          type: string
        selectedQueryName:
          description: Name of the selected query. This is the name of the query from the composite query that is used to evaluate the condition.
          type: string
        alertOnAbsent:
          description: Whether to alert on absent values. Corresponds to "Send a notification if data is missing for" from the alert configuration UI.
          type: boolean
        absentFor:
          description: Amount of time for which data is missing in minutes to trigger [No data] alert. Corresponds to "Send a notification if data is missing for" from the alert configuration UI.
          type: integer
        requireMinPoints:
          description: Whether to require minimum points to evaluate the condition. Corresponds to "Run alert evaluation only when there are minimum of" from the alert configuration UI.
          type: boolean
        requiredNumPoints:
          description: Number of points required to evaluate the condition. This is helpful to avoid false positives when the query returns less than expected points. Example - if the query returns 2 points, but the eval window is 15 minutes, it is likely that there is not enough data to evaluate the condition so you could enforce a minimum of 10 points to evaluate the condition. Corresponds to "Run alert evaluation only when there are minimum of" from the alert configuration UI.
          type: integer

    Alert:
      type: object
      required:
        - alert
        - alertType
        - ruleType
        - condition
      properties:
        alert:
          description: Name of the alert.
          type: string
        alertType:
          description: Type of the alert
          oneOf:
            - $ref: '#/components/schemas/AlertType'
        description:
          description: Description of the alert. Supports templating result labels from the query in the description. See how to use it here https://signoz.io/docs/alerts-management/metrics-based-alerts/#alert-description
          type: string
        ruleType:
          description: Type of the rule
          oneOf:
            - $ref: '#/components/schemas/RuleType'
        evalWindow:
          description: Evaluation time window (ex - (now-15m, now)) for the alert in parseable format ("15m", "30m" "1h" etc.). Default is 5m.
          type: string
        frequency:
          description: Run frequency of the alert in parseable format ("15m", "30m" "1h" etc.). Default is 1m i.e runs every minute. Minimum is 1m.
          type: string
        condition:
          description: Condition criteria for the alert.
          allOf:
            - $ref: '#/components/schemas/Condition'
        labels:
          description: Additional static labels for the alert
          type: object
          properties:
            key:
              type: string
              description: Key for the label
            value:
              type: string
              description: Value for the label
        annotations:
          description: Additional static annotations for the alert
          type: object
          properties:
            key:
              type: string
              description: Key for the annotation
            value:
              type: string
              description: Value for the annotation
        disabled:
          description: Whether the alert is disabled or not
          type: boolean
        source:
          description: Source of the alert where it is created from. Use your instance URL for this.
          type: string
        preferredChannels:
          description: Preferred channels for the alert. If not specified, all the channels will be used. Use the alert channel for this. This should be an array of alert channel names.
          type: array
          items:
            type: string
        version:
          description: Version of the alert. Use "v4" unless you are user of old SigNoz version.
          type: string
      xml:
        name: Alert

    QueryRangeParams:
      type: object
      required:
        - start
        - end
        - step
        - compositeQuery
      properties:
        start:
          type: integer
          format: int64
          description: Start time in epoch milliseconds
        end:
          type: integer
          format: int64
          description: End time in epoch milliseconds
        step:
          type: integer
          format: int64
          description: Step/aggregation interval in seconds.
        compositeQuery:
          $ref: '#/components/schemas/CompositeQuery'
        variables:
          type: object
          description: Variables for the query. Useful when using templated queries. See https://signoz.io/docs/userguide/manage-variables/ for more details.
          additionalProperties: true
        noCache:
          type: boolean
          description: Whether to bypass cache for this query
          default: false
        formatForWeb:
          type: boolean
          description: Whether to format the results for web display
          default: true
      examples:
        CpuUsageExample:
          $ref: '#/components/examples/CpuUsageExample'
        HttpDurationExample:
          $ref: '#/components/examples/HttpDurationExample'
        MemoryUsedExample:
          $ref: '#/components/examples/MemoryUsedExample'
        RequestCountExample:
          $ref: '#/components/examples/RequestCountExample'
        ErrorRateExample:
          $ref: '#/components/examples/ErrorRateExample'

    CompositeQuery:
      type: object
      required:
        - queryType
        - panelType
      properties:
        builderQueries:
          type: object
          description: Builder queries for the composite query
          additionalProperties:
            $ref: '#/components/schemas/BuilderQuery'
        chQueries:
          type: object
          description: Clickhouse SQL queries for the composite query
          additionalProperties:
            $ref: '#/components/schemas/ClickHouseQuery'
        promQueries:
          type: object
          description: PromQL queries for the composite query
          additionalProperties:
            $ref: '#/components/schemas/PromQuery'
        panelType:
          type: string
          description: Panel type for the composite query. The format of the data is different for different panel types.
          enum:
            - 'graph'
            - 'table'
            - 'value'
            - 'list'
            - 'trace'
        queryType:
          type: string
          description: Query type for the composite query.
          enum:
            - 'builder'
            - 'clickhouse_sql'
            - 'promql'
        unit:
          type: string
          description: Unit for the time series data shown in the graph, This is mandatory for alerts that set the unit for the threshold.
        fillGaps:
          type: boolean
          description: Whether to fill gaps in the time series data. See more details here https://signoz.io/docs/dashboards/panel-types/timeseries/#fill-gaps
          default: false

    PromQuery:
      type: object
      required:
        - query
        - disabled
        - name
      properties:
        query:
          type: string
          description: PromQL query expression
        stats:
          type: string
          description: Stats for the query
        disabled:
          type: boolean
          description: Whether the PromQL query is disabled
        legend:
          type: string
          description: Legend for the query
        name:
          type: string
          description: Name for the query (alphabet letter used in the UI, e.g. A, B, C, etc.)

    ClickHouseQuery:
      type: object
      required:
        - query
        - disabled
        - name
      properties:
        query:
          type: string
          description: ClickHouse SQL query
        disabled:
          type: boolean
          description: Whether the ClickHouse SQL query is disabled
        legend:
          type: string
          description: Legend for the query
        name:
          type: string
          description: Name for the query (alphabet letter used in the UI, e.g. A, B, C, etc.)

    BuilderQuery:
      type: object
      required:
        - queryName
        - stepInterval
        - dataSource
        - expression
      properties:
        queryName:
          type: string
          description: Name of the query
        stepInterval:
          type: integer
          format: int64
          description: Step/Aggregation interval for the query in seconds.
        dataSource:
          type: string
          description: Data source for the query
          enum:
            - 'metrics'
            - 'traces'
            - 'logs'
        aggregateOperator:
          type: string
          description: Aggregate operator for the query, only applicable for traces and logs. See timeAggregation and spaceAggregation for metrics. Use noop for list queries that fetch the raw data.
          enum:
            - 'noop'
            - 'count'
            - 'count_distinct'
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
            - 'p05'
            - 'p10'
            - 'p20'
            - 'p25'
            - 'p50'
            - 'p75'
            - 'p90'
            - 'p95'
            - 'p99'
            - 'rate'
            - 'rate_sum'
            - 'rate_avg'
            - 'rate_min'
            - 'rate_max'
        aggregateAttribute:
          $ref: '#/components/schemas/AttributeKey'
        temporality:
          type: string
          description: Temporality for metrics data
          enum:
            - 'Unspecified'
            - 'Delta'
            - 'Cumulative'
        filters:
          $ref: '#/components/schemas/FilterSet'
        groupBy:
          type: array
          description: Group by attributes for the query
          items:
            $ref: '#/components/schemas/AttributeKey'
        expression:
          type: string
          description: Expression for the query
        disabled:
          type: boolean
          description: Whether the query is disabled
        having:
          type: array
          description: Having clauses for the query
          items:
            $ref: '#/components/schemas/Having'
        legend:
          type: string
          description: Legend for the query
        limit:
          type: integer
          format: uint64
          description: Limit for the query
        offset:
          type: integer
          format: uint64
          description: Offset for the query
        pageSize:
          type: integer
          format: uint64
          description: Page size for the query
        orderBy:
          type: array
          description: Order by for the query
          items:
            $ref: '#/components/schemas/OrderBy'
        reduceTo:
          type: string
          description: Reduce to operator for the query. If the panel type is `value`, you can use this to reduce the query result to a single value.
          enum:
            - 'last'
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
        selectColumns:
          type: array
          description: Select columns for the query
          items:
            $ref: '#/components/schemas/AttributeKey'
        timeAggregation:
          type: string
          description: Time aggregation for metrics queries. Read more here https://signoz.io/docs/metrics-management/types-and-aggregation/
          enum:
            - 'latest'
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
            - 'count'
            - 'count_distinct'
            - 'rate'
            - 'increase'
        spaceAggregation:
          type: string
          description: Space aggregation for metrics queries. Read more here https://signoz.io/docs/metrics-management/types-and-aggregation/
          enum:
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
            - 'count'
            - 'p50'
            - 'p75'
            - 'p90'
            - 'p95'
            - 'p99'
        seriesAggregation:
          type: string
          description: Series aggregation for metrics queries with group by
          enum:
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
        functions:
          type: array
          description: Functions to apply to the query result
          items:
            $ref: '#/components/schemas/Function'

    AttributeKey:
      type: object
      required:
        - key
      properties:
        key:
          type: string
          description: Key for the attribute, this can be 1. intrinsic field like span's `name`, `kind`, `kind_string`, `duration_nano` or log's `timestamp`, `severity` etc. or span/log's attribute like `http.method`, `user.id`, `db.name` etc. or a resource attribute like `service.name`, `deployment.environment` etc.
        dataType:
          type: string
          description: Data type of the attribute. Required when there are conflicting types for the same attribute key. For instance, one team might send `http.status_code` as `int64` and another team might send it as `string`.
          enum:
            - 'string'
            - 'int64'
            - 'float64'
            - 'bool'
            - 'array(string)'
            - 'array(int64)'
            - 'array(float64)'
            - 'array(bool)'
        type:
          description: Type of the attribute. Required when there are conflicting types for the same attribute key. For instance, one team might send `deployment.environment` as `tag` and another team might send it as `resource`. It is highly recommended to avoid conflicting types, if possible.
          enum:
            - 'tag'
            - 'resource'
            - 'scope'
            - 'spanSearchScope'
        isColumn:
          type: boolean
          description: Whether the attribute is a materialized column.
        isJSON:
          type: boolean
          description: Whether the attribute is JSON. Set this to true if you are querying the JSON stringified body. You are encourage to parse the JSON before ingesting the data for better query performance and capabilities. Read more here https://signoz.io/docs/logs-pipelines/guides/json/
          
    FilterSet:
      type: object
      properties:
        op:
          type: string
          description: Operator for combining filter items. It is either `AND` between the filter items or `OR` between the filter items.
          enum:
            - 'AND'
            - 'OR'
        items:
          type: array
          description: Filter items
          items:
            $ref: '#/components/schemas/FilterItem'
          
    FilterItem:
      type: object
      required:
        - key
        - op
      properties:
        key:
          $ref: '#/components/schemas/AttributeKey'
        value:
          description: Value to filter by. Type depends on the attribute's dataType. For instance, if attribute is string and the operator is `like`, the value should be a string. If the attribute is int64 and the operator is `>`, the value should be an int64. If the attribute is string and the operator is `in`, the value should be an array of strings.
        op:
          type: string
          description: Filter operator
          enum:
            - '='
            - '!='
            - '>'
            - '>='
            - '<'
            - '<='
            - 'in'
            - 'nin'
            - 'like'
            - 'nlike'
            - 'contains'
            - 'ncontains'
            - 'regex'
            - 'nregex'
            - 'exists'
            - 'nexists'
            - 'has'
            - 'nhas'
            
    Having:
      type: object
      required:
        - columnName
        - op
        - value
      properties:
        columnName:
          type: string
          description: Column name for the having clause. The column name will always be the aggregate operator + aggregation attribute. The actual column name doesn't matter.
        op:
          type: string
          description: Operator for the having clause
          enum:
            - '='
            - '!='
            - '>'
            - '>='
            - '<'
            - '<='
            - 'IN'
            - 'NOT_IN'
        value:
          description: Value for the having clause. Type depends on the column.
          
    OrderBy:
      type: object
      required:
        - columnName
        - order
      properties:
        columnName:
          type: string
          description: Column name for the order by. For the attribute keys in the groupBy, you can use the same attribute key. For instance, if you are grouping by `service.name`, you can use `service.name` in the orderBy. Use the special `#SIGNOZ_VALUE` to order by the value of the query.
        order:
          type: string
          description: Order direction
          enum:
            - 'asc'
            - 'desc'
          
    Function:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: Function name
          enum:
            - 'cutOffMin'
            - 'cutOffMax'
            - 'clampMin'
            - 'clampMax'
            - 'absolute'
            - 'runningDiff'
            - 'log2'
            - 'log10'
            - 'cumSum'
            - 'ewma3'
            - 'ewma5'
            - 'ewma7'
            - 'median3'
            - 'median5'
            - 'median7'
            - 'timeShift'
            - 'anomaly'
        args:
          type: array
          description: Function arguments
          items:
            type: object
        namedArgs:
          type: object
          description: Named arguments for the function
          additionalProperties: true
          
    QueryRangeResponse:
      type: object
      properties:
        contextTimeout:
          type: boolean
          description: Whether the context timed out
        contextTimeoutMessage:
          type: string
          description: Message for context timeout
        resultType:
          type: string
          description: Type of the result
        result:
          type: array
          description: Query results
          items:
            $ref: '#/components/schemas/Result'
            
    Result:
      type: object
      properties:
        queryName:
          type: string
          description: Name of the query
        series:
          type: array
          description: Time series data
          items:
            $ref: '#/components/schemas/Series'
        predictedSeries:
          type: array
          description: Predicted series data (for anomaly detection)
          items:
            $ref: '#/components/schemas/Series'
        upperBoundSeries:
          type: array
          description: Upper bound series data (for anomaly detection)
          items:
            $ref: '#/components/schemas/Series'
        lowerBoundSeries:
          type: array
          description: Lower bound series data (for anomaly detection)
          items:
            $ref: '#/components/schemas/Series'
        anomalyScores:
          type: array
          description: Anomaly scores data (for anomaly detection)
          items:
            $ref: '#/components/schemas/Series'
        list:
          type: array
          description: List data
          items:
            $ref: '#/components/schemas/Row'
        table:
          $ref: '#/components/schemas/Table'
    
    Series:
      type: object
      properties:
        labels:
          type: object
          description: Labels for the series
          additionalProperties:
            type: string
        labelsArray:
          type: array
          description: Array of labels for the series
          items:
            type: object
            additionalProperties:
              type: string
        values:
          type: array
          description: Data points for the series
          items:
            $ref: '#/components/schemas/Point'
            
    Point:
      type: object
      required:
        - timestamp
        - value
      properties:
        timestamp:
          type: integer
          format: int64
          description: Timestamp for the data point
        value:
          type: string
          description: Value for the data point (formatted as string)
            
    Row:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          description: Timestamp for the row
        data:
          type: object
          description: Data for the row
          additionalProperties: true
            
    Table:
      type: object
      properties:
        columns:
          type: array
          description: Columns for the table
          items:
            $ref: '#/components/schemas/TableColumn'
        rows:
          type: array
          description: Rows for the table
          items:
            $ref: '#/components/schemas/TableRow'
            
    TableColumn:
      type: object
      properties:
        name:
          type: string
          description: Name of the column
        queryName:
          type: string
          description: Name of the query that this column belongs to
        isValueColumn:
          type: boolean
          description: Whether this column is a value column
            
    TableRow:
      type: object
      properties:
        data:
          type: object
          description: Data for the row
          additionalProperties: true

    QueryRangeRequestV5:
      type: object
      required:
        - start
        - end
        - requestType
        - compositeQuery
      properties:
        start:
          type: integer
          format: int64
          description: Start time in epoch milliseconds
          example: 1742602572000
        end:
          type: integer
          format: int64
          description: End time in epoch milliseconds
          example: 1742604372000
        requestType:
          type: string
          description: |
            Specify
            - "time_series" for aggregated data over time intervals in series format (ex - line/bar chart)
            - "scalar" for a single aggregated value across the entire time range (table/number panel)
            - "raw" for unprocessed data (list of log entries)
            - "trace" for the traces explorer view
          enum:
            - 'time_series'
            - 'scalar'
            - 'raw'
            - 'trace'
          example: 'time_series'
        compositeQuery:
          $ref: '#/components/schemas/CompositeQueryV5'
        variables:
          type: object
          description: Variables for the query. Useful when using templated queries
          additionalProperties:
            $ref: '#/components/schemas/VariableItem'
        noCache:
          type: boolean
          description: Whether to bypass cache for this query
          default: false
        formatOptions:
          $ref: '#/components/schemas/FormatOptionsV5'

    CompositeQueryV5:
      type: object
      required:
        - queries
      properties:
        queries:
          type: array
          minItems: 1
          description: Array of queries to execute
          items:
            $ref: '#/components/schemas/QueryEnvelope'

    QueryEnvelope:
      type: object
      required:
        - type
        - spec
      properties:
        type:
          type: string
          description: Type of the query
          enum:
            - 'builder_query'
            - 'builder_formula'
            - 'builder_trace_operator'
            - 'clickhouse_sql'
            - 'promql'
        spec:
          description: Query specification based on type
          oneOf:
            - $ref: '#/components/schemas/BuilderQueryV5'
            - $ref: '#/components/schemas/BuilderFormula'
            - $ref: '#/components/schemas/TraceOperator'
            - $ref: '#/components/schemas/ClickHouseQueryV5'
            - $ref: '#/components/schemas/PromQueryV5'
      discriminator:
        propertyName: type

    BuilderQueryV5:
      type: object
      required:
        - name
        - signal
      properties:
        name:
          type: string
          description: Name of the query (e.g., A, B, C)
          example: "A"
        signal:
          type: string
          description: Signal type to query
          enum:
            - 'metrics'
            - 'logs'
            - 'traces'
        stepInterval:
          type: number
          description: Step/aggregation interval in seconds
          example: 60
        aggregations:
          type: array
          description: Aggregations to apply
          minItems: 1
          items:
            oneOf:
              - $ref: '#/components/schemas/MetricAggregation'
              - $ref: '#/components/schemas/LogAggregation'
              - $ref: '#/components/schemas/TraceAggregation'
        filter:
          $ref: '#/components/schemas/FilterV5'
        groupBy:
          type: array
          description: Fields to group by
          items:
            $ref: '#/components/schemas/TelemetryFieldKey'
        having:
          $ref: '#/components/schemas/HavingV5'
        order:
          type: array
          description: Order by clauses
          items:
            $ref: '#/components/schemas/OrderByV5'
        limit:
          type: integer
          description: Maximum number of results to return
          minimum: 0
          maximum: 10000
          default: 10
        offset:
          type: integer
          description: Number of results to skip
          minimum: 0
        cursor:
          type: string
          description: Cursor for pagination
        disabled:
          type: boolean
          description: Whether the query is disabled
          default: false
        selectFields:
          type: array
          description: Fields to select (for raw queries)
          items:
            $ref: '#/components/schemas/TelemetryFieldKey'
        # secondaryAggregations:
        #   type: array
        #   description: Secondary aggregations to apply
        #   items:
        #     $ref: '#/components/schemas/SecondaryAggregation'
        functions:
          type: array
          description: Functions to apply to results
          items:
            $ref: '#/components/schemas/FunctionV5'
        legend:
          type: string
          description: Legend for the query

    MetricAggregation:
      type: object
      required:
        - metricName
        - temporality
        - timeAggregation
        - spaceAggregation
      properties:
        metricName:
          type: string
          description: Name of the metric to query
          example: "system.cpu.time"
        temporality:
          type: string
          description: Temporality of the metric
          enum:
            - 'Cumulative'
            - 'Delta'
            - 'Unspecified'
        timeAggregation:
          type: string
          description: Time aggregation function
          enum:
            - 'rate'
            - 'latest'
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
            - 'count'
            - 'count_distinct'
            - 'increase'
        spaceAggregation:
          type: string
          description: Space aggregation function
          enum:
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
            - 'count'
            - 'p50'
            - 'p75'
            - 'p90'
            - 'p95'
            - 'p99'
        reduceTo:
          type: string
          description: Reduce time series to single value
          enum:
            - 'last'
            - 'sum'
            - 'avg'
            - 'min'
            - 'max'
            - 'count'
            - 'median'

    LogAggregation:
      type: object
      required:
        - expression
      properties:
        expression:
          type: string
          description: Aggregation expression (e.g., count(), sum(duration))
          example: "count()"
        alias:
          type: string
          description: Alias for the aggregation result

    TraceAggregation:
      type: object
      required:
        - expression
      properties:
        expression:
          type: string
          description: Aggregation expression (e.g., count(), avg(duration))
          example: "avg(duration)"
        alias:
          type: string
          description: Alias for the aggregation result

    FilterV5:
      type: object
      required:
        - expression
      properties:
        expression:
          type: string
          description: Filter expression following the filter syntax
          example: 'service.name = "frontend"'

    HavingV5:
      type: object
      required:
        - expression
      properties:
        expression:
          type: string
          description: Having clause expression
          example: 'count() > 100'

    OrderByV5:
      type: object
      required:
        - key
        - direction
      properties:
        key:
          $ref: '#/components/schemas/TelemetryFieldKey'
        direction:
          type: string
          enum:
            - 'asc'
            - 'desc'

    SecondaryAggregation:
      type: object
      required:
        - expression
      properties:
        stepInterval:
          type: number
          description: Step interval for this aggregation (optional)
        expression:
          type: string
          description: Aggregation expression
        alias:
          type: string
          description: Alias for the result
        groupBy:
          type: array
          items:
            $ref: '#/components/schemas/TelemetryFieldKey'
        order:
          type: array
          items:
            $ref: '#/components/schemas/OrderBy'
        limit:
          type: integer
          minimum: 0
        limitBy:
          $ref: '#/components/schemas/LimitBy'

    LimitBy:
      type: object
      required:
        - keys
        - value
      properties:
        keys:
          type: array
          items:
            type: string
        value:
          type: string

    FunctionV5:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: Function name
          enum:
            - 'cutOffMin'
            - 'cutOffMax'
            - 'clampMin'
            - 'clampMax'
            - 'absolute'
            - 'runningDiff'
            - 'log2'
            - 'log10'
            - 'cumulativeSum'
            - 'ewma3'
            - 'ewma5'
            - 'ewma7'
            - 'median3'
            - 'median5'
            - 'median7'
            - 'timeShift'
            - 'anomaly'
            - 'fillZero'
        args:
          type: array
          description: Function arguments
          items:
            $ref: '#/components/schemas/FunctionArg'

    FunctionArg:
      type: object
      required:
        - value
      properties:
        name:
          type: string
          description: Argument name (optional)
        value:
          description: Argument value (can be string, number, etc.)

    BuilderFormula:
      type: object
      required:
        - name
        - expression
      properties:
        name:
          type: string
          description: Name of the formula
        expression:
          type: string
          description: Formula expression (e.g., "A / B * 100")
          example: "A / B * 100"
        disabled:
          type: boolean
          default: false
        order:
          type: array
          items:
            $ref: '#/components/schemas/OrderByV5'
        limit:
          type: integer
          minimum: 0
        having:
          $ref: '#/components/schemas/HavingV5'
        functions:
          type: array
          items:
            $ref: '#/components/schemas/FunctionV5'
        legend:
          type: string

    TraceOperator:
      type: object
      required:
        - name
        - expression
      properties:
        name:
          type: string
          description: Name of the trace operator
        disabled:
          type: boolean
          default: false
        expression:
          type: string
          description: Trace operator expression (e.g., "A => B", "A && B")
          example: "A => B && C"
        filter:
          $ref: '#/components/schemas/FilterV5'
        returnSpansFrom:
          type: string
          description: Which query's spans to return
        order:
          type: array
          items:
            $ref: '#/components/schemas/TraceOrderBy'
        aggregations:
          type: array
          items:
            $ref: '#/components/schemas/TraceAggregation'
        stepInterval:
          type: number
          minimum: 0
        groupBy:
          type: array
          items:
            $ref: '#/components/schemas/TelemetryFieldKey'
        having:
          $ref: '#/components/schemas/HavingV5'
        limit:
          type: integer
          minimum: 0
          maximum: 10000
        offset:
          type: integer
          minimum: 0
        cursor:
          type: string
        legend:
          type: string
        selectFields:
          type: array
          items:
            $ref: '#/components/schemas/TelemetryFieldKey'
        functions:
          type: array
          items:
            $ref: '#/components/schemas/FunctionV5'

    TraceOrderBy:
      type: object
      required:
        - key
        - direction
      properties:
        key:
          type: object
          required:
            - name
          properties:
            name:
              type: string
              enum:
                - 'span_count'
                - 'trace_duration'
        direction:
          type: string
          enum:
            - 'asc'
            - 'desc'

    ClickHouseQueryV5:
      type: object
      required:
        - name
        - query
      properties:
        name:
          type: string
          description: Name of the query
        query:
          type: string
          description: ClickHouse SQL query
        disabled:
          type: boolean
          default: false
        legend:
          type: string

    PromQueryV5:
      type: object
      required:
        - name
        - query
      properties:
        name:
          type: string
          description: Name of the query
        query:
          type: string
          description: PromQL expression
        disabled:
          type: boolean
          default: false
        step:
          type: number
          description: Step interval in seconds
        stats:
          type: boolean
          description: Whether to include query stats
          default: false
        legend:
          type: string

    TelemetryFieldKey:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: Field name
          example: service.name
        fieldDataType:
          $ref: '#/components/schemas/FieldDataType'
        fieldContext:
          type: string
          enum:
            - 'resource'
            - 'attribute'
            - 'scope'
            - 'span'
            - 'log'

    FieldDataType:
      type: string
      enum:
        - 'string'
        - 'int64'
        - 'float64'
        - 'bool'
        - 'array(string)'
        - 'array(int64)'
        - 'array(float64)'
        - 'array(bool)'

    VariableItem:
      type: object
      required:
        - type
        - value
      properties:
        type:
          type: string
          enum:
            - 'query'
            - 'dynamic'
            - 'custom'
            - 'text'
        value:
          description: Variable value

    FormatOptionsV5:
      type: object
      properties:
        fillGaps:
          type: boolean
          description: Whether to fill gaps in time series data
          default: false
        formatTableResultForUI:
          type: boolean
          description: Whether to format table results for UI display
          default: false

    QueryRangeResponseV5:
      type: object
      properties:
        type:
          type: string
          description: Type of the response
          enum:
            - 'time_series'
            - 'scalar'
            - 'raw'
            - 'trace'
            - 'distribution'
        data:
          $ref: '#/components/schemas/QueryData'
        meta:
          $ref: '#/components/schemas/ExecStats'
        warning:
          $ref: '#/components/schemas/QueryWarnData'

    QueryData:
      type: object
      properties:
        results:
          type: array
          description: Array of results based on request type
          items:
            oneOf:
              - $ref: '#/components/schemas/TimeSeriesData'
              - $ref: '#/components/schemas/ScalarData'
              - $ref: '#/components/schemas/RawData'

    TimeSeriesData:
      type: object
      properties:
        queryName:
          type: string
          description: Name of the query this data belongs to
        aggregations:
          type: array
          items:
            $ref: '#/components/schemas/AggregationBucket'

    AggregationBucket:
      type: object
      properties:
        index:
          type: integer
          description: Aggregation index
        alias:
          type: string
          description: Aggregation alias
        meta:
          type: object
          properties:
            unit:
              type: string
              description: Unit for the values
        series:
          type: array
          items:
            $ref: '#/components/schemas/TimeSeries'
        predictedSeries:
          type: array
          description: Predicted series (for anomaly detection)
          items:
            $ref: '#/components/schemas/TimeSeries'
        upperBoundSeries:
          type: array
          items:
            $ref: '#/components/schemas/TimeSeries'
        lowerBoundSeries:
          type: array
          items:
            $ref: '#/components/schemas/TimeSeries'
        anomalyScores:
          type: array
          items:
            $ref: '#/components/schemas/TimeSeries'

    TimeSeries:
      type: object
      properties:
        labels:
          type: array
          items:
            $ref: '#/components/schemas/Label'
        values:
          type: array
          items:
            $ref: '#/components/schemas/TimeSeriesValue'

    Label:
      type: object
      properties:
        key:
          $ref: '#/components/schemas/TelemetryFieldKey'
        value:
          description: Label value

    TimeSeriesValue:
      type: object
      properties:
        timestamp:
          type: integer
          format: int64
          description: Timestamp in milliseconds
        value:
          type: number
          format: double
        partial:
          type: boolean
          description: Whether this value is partial (doesn't cover complete interval)
        values:
          type: array
          description: For heatmap type charts
          items:
            type: number
        bucket:
          type: object
          properties:
            step:
              type: number

    ScalarData:
      type: object
      properties:
        queryName:
          type: string
        columns:
          type: array
          items:
            $ref: '#/components/schemas/ColumnDescriptor'
        data:
          type: array
          items:
            type: array

    ColumnDescriptor:
      type: object
      properties:
        name:
          type: string
        dataType:
          $ref: '#/components/schemas/FieldDataType'
        type:
          type: string
        queryName:
          type: string
        aggregationIndex:
          type: integer
        meta:
          type: object
          properties:
            unit:
              type: string
        columnType:
          type: string
          enum:
            - 'group'
            - 'aggregation'

    RawData:
      type: object
      properties:
        queryName:
          type: string
        nextCursor:
          type: string
        rows:
          type: array
          items:
            $ref: '#/components/schemas/RawRow'

    RawRow:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        data:
          type: object
          additionalProperties: true

    ExecStats:
      type: object
      properties:
        rowsScanned:
          type: integer
          format: int64
        bytesScanned:
          type: integer
          format: int64
        durationMs:
          type: integer
          format: int64

    QueryWarnData:
      type: object
      properties:
        message:
          type: string
        url:
          type: string
        warnings:
          type: array
          items:
            type: object
            properties:
              message:
                type: string

    Channel:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The unique identifier of the channel.
        createdAt:
          type: string
          format: date-time
          description: The timestamp when the channel was created.
        updatedAt:
          type: string
          format: date-time
          description: The timestamp when the channel was last updated.
        name:
          type: string
          description: The name of the channel.
        type:
          type: string
          description: The type of the channel. Supported types include `webhook`, `slack`, `email`, `pagerduty`, `opsgenie`, `msteams`. Third-party integrations use the `webhook` type.
        data:
          type: string
          description: JSON string containing the channel configuration.
        org_id:
          type: string
          description: The organization ID associated with the channel.
      example:
        id: "019a15f4-0938-718c-916b-214a99569b69"
        createdAt: "2025-10-24T11:21:46.040101Z"
        updatedAt: "2025-12-03T09:25:58.592418Z"
        name: "test webhook alert"
        type: "webhook"
        data: "{\"name\":\"test webhook alert\",\"webhook_configs\":[{\"send_resolved\":true,\"http_config\":{\"tls_config\":{\"insecure_skip_verify\":false},\"follow_redirects\":true,\"enable_http2\":true,\"proxy_url\":null},\"url\":\"https://play.webhook.com/in/SOME_WEBHOOK_URL/\",\"url_file\":\"\",\"max_alerts\":0,\"timeout\":0}]}"
        org_id: "0199f1fa-b0b9-7292-a0ca-700abcbb744c"

    Receiver:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: The name of the receiver/channel.
        webhook_configs:
          type: array
          description: |
            Configuration for Webhook integrations.
            See documentation: https://signoz.io/docs/alerts-management/notification-channel/webhook/#configure-programmatically
          items:
            $ref: '#/components/schemas/WebhookConfig'
        slack_configs:
          type: array
          description: |
            Configuration for Slack integrations.
            See documentation: https://signoz.io/docs/alerts-management/notification-channel/slack/#configure-programmatically
          items:
            $ref: '#/components/schemas/SlackConfig'
        email_configs:
          type: array
          description: |
            Configuration for Email notifications.
            See documentation: https://signoz.io/docs/alerts-management/notification-channel/email/#configure-programmatically
          items:
            $ref: '#/components/schemas/EmailConfig'
        pagerduty_configs:
          type: array
          description: |
            Configuration for PagerDuty integrations.
            See documentation: https://signoz.io/docs/alerts-management/notification-channel/pagerduty/#configure-programmatically
          items:
            $ref: '#/components/schemas/PagerdutyConfig'
        opsgenie_configs:
          type: array
          description: |
            Configuration for Opsgenie integrations.
            See documentation: https://signoz.io/docs/alerts-management/notification-channel/opsgenie/#configure-programmatically
          items:
            $ref: '#/components/schemas/OpsgenieConfig'
        msteamsv2_configs:
          type: array
          description: |
            Configuration for Microsoft Teams integrations.
            See documentation: https://signoz.io/docs/alerts-management/notification-channel/ms-teams/#configure-programmatically
          items:
            $ref: '#/components/schemas/MSTeamsV2Config'

    WebhookConfig:
      type: object
      required:
        - url
      properties:
        send_resolved:
          type: boolean
          default: true
          description: Whether to send notifications when an alert is resolved.
        url:
          type: string
          format: uri
          description: The Webhook URL endpoint.
        http_config:
          type: object
          description: HTTP configuration for the webhook, such as basic auth.
          properties:
            basic_auth:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string

    SlackConfig:
      type: object
      required:
        - api_url
      properties:
        send_resolved:
          type: boolean
          description: Whether to send notifications when an alert is resolved.
        api_url:
          type: string
          format: uri
          description: The Slack Incoming Webhook URL.
        channel:
          type: string
          description: The channel to send notifications to. Use #channel-name.
        title:
          type: string
          description: Templated title of the message. Go templates are supported.
        text:
          type: string
          description: Templated text of the message. Go templates are supported.

    EmailConfig:
      type: object
      required:
        - to
      properties:
        send_resolved:
          type: boolean
          description: Whether to send notifications when an alert is resolved.
        to:
          type: string
          description: The email address to which the alerts are sent.
        html:
          type: string
          description: The HTML body of the email.
        headers:
          type: object
          description: http headers stringified key/value pairs.
          additionalProperties: true

    PagerdutyConfig:
      type: object
      required:
        - routing_key
      properties:
        send_resolved:
          type: boolean
          description: Whether to send notifications when an alert is resolved.
        routing_key:
          type: string
          description: The PagerDuty Integration Key (Routing Key). This is the "Integration Key" listed on the Events API V2 integration's detail page.
        client:
          type: string
          description: The name of the monitoring client that is triggering this event. 
        client_url:
          type: string
          description: The URL of the client sending the alert.
        description:
          type: string
          description: Templated description of the alert. Go templates are supported.
        severity:
          type: string
          description: The perceived severity of the status the event is describing withrespect to the affected system. Allowed values are; ["critical", "warning", "error", "info"]
        class:
          type: string
          description: The class/type of the event.
        component:
          type: string
          description: Component of the source machine that is responsible for the event.
        group:
          type: string
          description: Logical grouping of components of a service.
        details:
          type: object
          description: Additional details for the alert.
          additionalProperties: true

    OpsgenieConfig:
      type: object
      required:
        - api_key
      properties:
        api_key:
          type: string
          description: The Opsgenie API Key.
        description:
          type: string
          description: Templated description of the alert. Go templates are supported.
        priority:
          type: string
          description: Priority of the alert.
        message:
          type: string
          description: Templated message of the alert.
        details:
          type: object
          description: Additional details for the alert.
          additionalProperties: true

    MSTeamsV2Config:
      type: object
      required:
        - webhook_url
      properties:
        send_resolved:
          type: boolean
          description: Whether to send notifications when an alert is resolved.
        webhook_url:
          type: string
          format: uri
          description: The Microsoft Teams Incoming Webhook URL.
        title:
          type: string
          description: Templated title of the message. Go templates are supported.
        text:
          type: string
          description: Templated text of the message. Go templates are supported.

    ErrorResponse:
      type: object
      properties:
        status:
          type: string
          example: error
        error:
          type: object
          properties:
            code:
              type: string
              example: unknown
            message:
              type: string
              example: 'error message'

    RoutePolicy:
      type: object
      required:
        - id
        - name
        - expression
      properties:
        id:
          type: string
          format: uuid
          example: "019ae364-e7ab-785e-a208-cacc8c39e752"
        name:
          type: string
          description: Name of the route policy
          example: "Test Route policy"
        expression:
          type: string
          description: |
            The expression logic for the route policy.
            Supported labels:
            - User-defined labels (e.g., `type`, `team`)
            - Platform labels (`threshold.name`, `alertname`)
            - Dynamic labels from query (`service.name`, `k8s.pod.name`, etc.)
            
            Operators: `=`, `!=`, `CONTAINS`, `REGEXP`, `IN`, `AND`, `OR`.
            Example: `service.name = "checkout" AND type = "application"`
          example: "service.name = \"something\""
        kind:
          type: string
          description: The kind of the resource
          example: "policy"
        channels:
          type: array
          description: List of notification channels associated with this policy
          items:
            type: string
          example: ["test webhook alert"]
        description:
          type: string
          description: Description of the route policy
          example: "Some description"
        createdAt:
          type: string
          format: date-time
          example: "2025-12-03T08:47:12.299548Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-12-03T08:47:12.299548Z"
        createdBy:
          type: string
          description: User who created the policy
          example: "user@email.io"
        updatedBy:
          type: string
          description: User who last updated the policy
          example: "user@email.io"

    RoutePolicyInput:
      type: object
      required:
        - name
        - expression
        - channels
      properties:
        name:
          type: string
          description: Name of the route policy
          example: "Test Route policy"
        expression:
          type: string
          description: |
            The expression logic for the route policy.
            Supported labels:
            - User-defined labels (e.g., `type`, `team`)
            - Platform labels (`threshold.name`, `alertname`)
            - Dynamic labels from query (`service.name`, `k8s.pod.name`, etc.)
            
            Operators: `=`, `!=`, `CONTAINS`, `REGEXP`, `IN`, `AND`, `OR`.
            Example: `service.name = "checkout" AND type = "application"`
          example: "service.name = \"something\""
        kind:
          type: string
          description: Type of route policy. Accepted values are `policy` and `rule`.
          enum:
            - policy
            - rule
          example: "policy"
        channels:
          type: array
          description: List of notification channels associated with this policy
          items:
            type: string
          example: ["test webhook alert"]
        description:
          type: string
          description: Description of the route policy
          example: "Some description"

    RoutePoliciesResponse:
      type: object
      properties:
        status:
          type: string
          example: "success"
        data:
          type: array
          items:
            $ref: '#/components/schemas/RoutePolicy'

    RoutePolicyResponse:
      type: object
      properties:
        status:
          type: string
          example: "success"
        data:
          $ref: '#/components/schemas/RoutePolicy'

  requestBodies:
    Field:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Field'
      description: Field object that needs to be added to the system
      required: true
    Alert:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Alert'
      description: Alert object that needs to be added to the system
      required: true
    Dashboard:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Dashboard'
      description: Dashboard object that needs to be added to the system
      required: true
  securitySchemes:
    api_key:
      description: >
        For this API docs, you can use the api key `SIGNOZ-API-KEY` to access data.
      type: apiKey
      name: SIGNOZ-API-KEY
      in: header
  examples:
    Order:
      value:
        quantity: 1
        shipDate: '2018-10-19T16:46:45Z'
        status: placed
        complete: false

    # Metrics examples
    CpuUsageExample:
      summary: CPU usage percentage over time (gauge metric with delta temporality)
      value:
        start: 1742602572000
        end: 1742604372000
        step: 60
        variables:
          SIGNOZ_START_TIME: 1742602572000
          SIGNOZ_END_TIME: 1742604372000
          k8s_node_name: ["gke-application-eu-c-pl-addon-n2dhc4--c80039c0-2gjz"]
          k8s_cluster_name: "application-eu-central"
        formatForWeb: false
        compositeQuery:
          queryType: "builder"
          panelType: "graph"
          fillGaps: false
          builderQueries:
            A:
              queryName: "A"
              dataSource: "metrics"
              aggregateAttribute:
                key: "k8s_node_cpu_utilization"
                dataType: "float64"
                type: "Gauge"
                isColumn: true
                isJSON: false
              expression: "A"
              disabled: false
              timeAggregation: "avg"
              spaceAggregation: "sum"
              stepInterval: 60
              reduceTo: "sum"
              filters:
                items:
                  - key:
                      key: "k8s_cluster_name"
                      dataType: "string"
                      isColumn: false
                      type: "tag"
                    op: "="
                    value: "{{.k8s_cluster_name}}"
                  - key:
                      key: "k8s_node_name"
                      dataType: "string"
                      isColumn: false
                      type: "tag"
                    op: "in"
                    value: ["{{.k8s_node_name}}"]
                op: "AND"
              groupBy:
                - key: "k8s_node_name"
                  dataType: "string"
                  isColumn: false
                  isJSON: false
                  type: "tag"
              having: []
              orderBy: []
              legend: "{{k8s_node_name}}"
              functions: []

    HttpDurationExample:
      summary: JVM GC Duration p90 from histogram metric
      value:
        start: 1742602968000
        end: 1742604768000
        step: 60
        variables:
          SIGNOZ_START_TIME: 1742602968000
          SIGNOZ_END_TIME: 1742604768000
        formatForWeb: false
        compositeQuery:
          queryType: "builder"
          panelType: "graph"
          fillGaps: false
          builderQueries:
            A:
              queryName: "A"
              dataSource: "metrics"
              aggregateAttribute:
                key: "jvm_gc_duration_bucket"
                dataType: "float64"
                type: "Histogram"
                isColumn: true
                isJSON: false
              timeAggregation: ""
              spaceAggregation: "p90"
              expression: "A"
              disabled: false
              stepInterval: 60
              reduceTo: "avg"
              filters:
                items: []
                op: "AND"
              groupBy:
                - key: "service_name"
                  dataType: "string"
                  type: "tag"
                  isColumn: false
                  isJSON: false
              having: []
              orderBy: []
              functions: []
              legend: "{{service_name}}"

    MemoryUsedExample:
      summary: Memory usage over time (gauge metric with unspecified temporality)
      value:
        start: 1742603085000
        end: 1742604885000
        step: 60
        variables:
          SIGNOZ_START_TIME: 1742603085000
          SIGNOZ_END_TIME: 1742604885000
          k8s_node_name: ["gke-application-pl-addon-n2dhc4-od-71879e78-0ql9"]
          k8s_cluster_name: "application"
        formatForWeb: true
        compositeQuery:
          queryType: "builder"
          panelType: "graph"
          fillGaps: false
          builderQueries:
            A:
              dataSource: "metrics"
              queryName: "A"
              aggregateOperator: "avg"
              aggregateAttribute:
                key: "k8s_node_memory_usage"
                dataType: "float64"
                type: "Gauge"
                isColumn: true
                isJSON: false
              timeAggregation: "avg"
              spaceAggregation: "sum"
              expression: "A"
              disabled: false
              stepInterval: 60
              functions: []
              filters:
                items:
                  - key:
                      key: "k8s_cluster_name"
                      dataType: "string"
                      isColumn: false
                      type: "tag"
                    op: "="
                    value: "{{.k8s_cluster_name}}"
                  - key:
                      key: "k8s_node_name"
                      dataType: "string"
                      isColumn: false
                      type: "tag"
                    op: "in"
                    value: ["{{.k8s_node_name}}"]
                op: "AND"
              having: []
              orderBy: []
              groupBy:
                - key: "k8s_node_name"
                  dataType: "string"
                  type: "tag"
                  isColumn: false
                  isJSON: false
              legend: "used"
              reduceTo: "avg"

    RequestCountExample:
      summary: HTTP request count as rate (sum metric with cumulative temporality)
      value:
        start: 1742603295000
        end: 1742605095000
        step: 60
        variables:
          SIGNOZ_START_TIME: 1742603278000
          SIGNOZ_END_TIME: 1742605078000
          k8s_node_name: ["gke-application-pl-addon-n2dhc4-od-71879e78-0ql9"]
          k8s_cluster_name: "application-eu-central"
        formatForWeb: false
        compositeQuery:
          queryType: "builder"
          panelType: "graph"
          fillGaps: false
          builderQueries:
            A:
              dataSource: "metrics"
              queryName: "A"
              aggregateOperator: "rate"
              aggregateAttribute:
                key: "signoz_calls_total"
                dataType: "float64"
                type: "Sum"
                isColumn: true
                isJSON: false
              timeAggregation: "rate"
              spaceAggregation: "sum"
              expression: "A"
              disabled: false
              stepInterval: 60
              functions: []
              filters:
                items: []
                op: "AND"
              having: []
              orderBy: []
              groupBy:
                - key: "service_name"
                  dataType: "string"
                  type: "tag"
                  isColumn: false
                  isJSON: false
              legend: "{{service_name}}"
              reduceTo: "avg"

    ErrorRateExample:
      summary: HTTP error rate calculation (sum metric with cumulative temporality)
      value:
        start: 1742601948000
        end: 1742605548000
        step: 60
        variables: {}
        formatForWeb: false
        compositeQuery:
          queryType: "builder"
          panelType: "graph"
          fillGaps: false
          builderQueries:
            A:
              dataSource: "metrics"
              queryName: "A"
              aggregateOperator: "rate"
              aggregateAttribute:
                key: "signoz_calls_total"
                dataType: "float64"
                type: "Sum"
                isColumn: true
                isJSON: false
              timeAggregation: "rate"
              spaceAggregation: "sum"
              functions: []
              filters:
                items:
                  - key:
                      key: "status_code"
                      dataType: "string"
                      type: "tag"
                      isColumn: false
                      isJSON: false
                    op: "="
                    value: "STATUS_CODE_ERROR"
                op: "AND"
              expression: "A"
              disabled: true
              stepInterval: 60
              having: []
              orderBy: []
              groupBy:
                - key: "service_name"
                  dataType: "string"
                  type: "tag"
                  isColumn: false
                  isJSON: false
              legend: "{{service_name}}"
              reduceTo: "avg"
            B:
              dataSource: "metrics"
              queryName: "B"
              aggregateOperator: "rate"
              aggregateAttribute:
                key: "signoz_calls_total"
                dataType: "float64"
                type: "Sum"
                isColumn: true
                isJSON: false
              timeAggregation: "rate"
              spaceAggregation: "sum"
              functions: []
              filters:
                items: []
                op: "AND"
              expression: "B"
              disabled: true
              stepInterval: 60
              having: []
              orderBy: []
              groupBy:
                - key: "service_name"
                  dataType: "string"
                  type: "tag"
                  isColumn: false
                  isJSON: false
              legend: ""
              reduceTo: "avg"
            F1:
              queryName: "F1"
              expression: "A/B"
              disabled: false
              legend: ""
